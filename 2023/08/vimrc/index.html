<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 7.0.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon/favicon.svg">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon/favicon.svg">
  <link rel="mask-icon" href="/images/favicon/safari-pinned-tab.svg" color="#222">
  <link rel="manifest" href="/images/favicon/site.webmanifest">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" integrity="sha256-yIDrPSXHZdOZhAqiBP7CKzIwMQmRCJ8UeB8Jo17YC4o=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.28/fancybox/fancybox.css" integrity="sha256-6cQIC71/iBIYXFK+0RHAvwmjwWzkWd+r7v/BX3/vZDc=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"pilgrimlyieu.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.19.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":"mac"},"fold":{"enable":true,"height":500,"threshold":500},"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":true,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="本篇博文详细介绍了我 Vim 配置的内容。">
<meta property="og:type" content="article">
<meta property="og:title" content="我的 Vim 配置 [已过时]">
<meta property="og:url" content="https://pilgrimlyieu.github.io/2023/08/vimrc/index.html">
<meta property="og:site_name" content="Shrine">
<meta property="og:description" content="本篇博文详细介绍了我 Vim 配置的内容。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://pilgrimlyieu.github.io/2023/08/vimrc/gvim.png">
<meta property="article:published_time" content="2023-08-19T06:35:59.000Z">
<meta property="article:modified_time" content="2024-02-14T09:19:17.000Z">
<meta property="article:author" content="Lyieu">
<meta property="article:tag" content="Vim">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://pilgrimlyieu.github.io/2023/08/vimrc/gvim.png">


<link rel="canonical" href="https://pilgrimlyieu.github.io/2023/08/vimrc/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://pilgrimlyieu.github.io/2023/08/vimrc/","path":"2023/08/vimrc/","title":"我的 Vim 配置 [已过时]"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>我的 Vim 配置 [已过时] | Shrine</title>
  







<link rel="dns-prefetch" href="https://blog-comments-virid.vercel.app/">
  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="Shrine" type="application/atom+xml">
<style>.admonition{font-size:.96em;margin:1.5625em 0;padding:.6rem;overflow:visible;page-break-inside:avoid;border-left:.3rem solid;border-radius:.3rem;box-shadow:0 .1rem .4rem rgba(0,0,0,.05),0 0 .05rem rgba(0,0,0,.1);line-height:1.8}.admonition>:last-child{margin-bottom:0!important}.admonition-title::before{position:absolute;top:1rem;left:1rem;width:16px;height:16px;border-radius:100%;content:" "}p.admonition-title{position:relative;margin:-.6rem -.6rem .8em -.6rem!important;padding:.4rem .6rem .4rem 2.5rem;font-weight:700;line-height:2}.admonition.note,.admonition.question,.admonition.success{border-color:#42b983}.note>.admonition-title::before,.question>.admonition-title::before,.success>.admonition-title::before{background-color:#42b983}.note>.admonition-title,.question>.admonition-title,.success>.admonition-title{background-color:rgba(66,185,131,.4)}.admonition.info,.admonition.todo{border-color:#00b8d4}.info>.admonition-title::before,.todo>.admonition-title::before{background-color:#00b8d4}.info>.admonition-title,.todo>.admonition-title{background-color:rgba(0,184,212,.4)}.admonition.attention,.admonition.caution,.admonition.warning{border-color:#ff9100}.attention>.admonition-title::before,.caution>.admonition-title::before,.warning>.admonition-title::before{background-color:#ff9100}.attention>.admonition-title,.caution>.admonition-title,.warning>.admonition-title{background-color:rgba(255,145,0,.4)}.admonition.bug,.admonition.danger,.admonition.error,.admonition.failure,.admonition.missing{border-color:#ff5252}.bug>.admonition-title::before,.danger>.admonition-title::before,.error>.admonition-title::before,.failure>.admonition-title::before,.missing>.admonition-title::before{background-color:#ff5252}.bug>.admonition-title,.danger>.admonition-title,.error>.admonition-title,.failure>.admonition-title,.missing>.admonition-title{background-color:rgba(255,82,82,.4)}.admonition.example{border-color:#903dcc}.example>.admonition-title::before{background-color:#903dcc}.example>.admonition-title{background-color:rgba(144,61,204,.4)}.admonition.quote{border-color:#aaa}.quote>.admonition-title::before{background-color:#aaa}.quote>.admonition-title{background-color:rgba(170,170,170,.4)}.admonition.abstract,.admonition.tip{border-color:#448aff}.abstract>.admonition-title::before,.tip>.admonition-title::before{background-color:#448aff}.abstract>.admonition-title,.tip>.admonition-title{background-color:rgba(68,138,255,.4)}.admonition.memo,.admonition.sheet{border-color:#c3a210}.memo>.admonition-title::before,.sheet>.admonition-title::before{background-color:#c3a210}.memo>.admonition-title,.sheet>.admonition-title{background-color:rgba(195,162,16,.4)}@media (prefers-color-scheme:light){.admonition{background-color:#eee}.admonition.test{border-color:#283747}.test>.admonition-title::before{background-color:#283747}.test>.admonition-title{background-color:rgba(40,55,71,.4)}}@media (prefers-color-scheme:dark){.admonition{background-color:#444}.admonition.test{border-color:#f2f3f4}.test>.admonition-title::before{background-color:#f2f3f4}.test>.admonition-title{background-color:rgba(242,243,244,.4)}}</style></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Shrine</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Fesmoph's Blog</p>
      <img class="custom-logo-image" src="/images/logo/logo.svg" alt="Shrine">
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">30</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-list-ul fa-fw"></i>分类<span class="badge">11</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-folder-open fa-fw"></i>归档<span class="badge">31</span></a></li><li class="menu-item menu-item-记事"><a href="/daily/" rel="section"><i class="fa fa-clipboard-list fa-fw"></i>记事</a></li><li class="menu-item menu-item-笔记"><a href="/notes/" rel="section"><i class="fa fa-scroll fa-fw"></i>笔记</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE"><span class="nav-number">1.</span> <span class="nav-text">设置</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC"><span class="nav-number">1.1.</span> <span class="nav-text">基本</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9D%82%E9%A1%B9"><span class="nav-number">1.2.</span> <span class="nav-text">杂项</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8F%92%E4%BB%B6"><span class="nav-number">1.3.</span> <span class="nav-text">插件</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%98%A0%E5%B0%84"><span class="nav-number">2.</span> <span class="nav-text">映射</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8F%92%E4%BB%B6-2"><span class="nav-number">3.</span> <span class="nav-text">插件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#vim-surround"><span class="nav-number">3.1.</span> <span class="nav-text">vim-surround</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Markdown"><span class="nav-number">3.2.</span> <span class="nav-text">Markdown</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#VimTeX"><span class="nav-number">3.3.</span> <span class="nav-text">VimTeX</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#UltiSnips"><span class="nav-number">3.4.</span> <span class="nav-text">UltiSnips</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#easymotion"><span class="nav-number">3.5.</span> <span class="nav-text">easymotion</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#vim-visual-multi"><span class="nav-number">3.6.</span> <span class="nav-text">vim-visual-multi</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#LeaderF"><span class="nav-number">3.7.</span> <span class="nav-text">LeaderF</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#vim-easy-align"><span class="nav-number">3.8.</span> <span class="nav-text">vim-easy-align</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ale"><span class="nav-number">3.9.</span> <span class="nav-text">ale</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#coc"><span class="nav-number">3.10.</span> <span class="nav-text">coc</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#NerdTree"><span class="nav-number">3.11.</span> <span class="nav-text">NerdTree</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Python"><span class="nav-number">3.12.</span> <span class="nav-text">Python</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#lightline"><span class="nav-number">3.13.</span> <span class="nav-text">lightline</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Rainbow"><span class="nav-number">3.14.</span> <span class="nav-text">Rainbow</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#indentLine"><span class="nav-number">3.15.</span> <span class="nav-text">indentLine</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Fugitive"><span class="nav-number">3.16.</span> <span class="nav-text">Fugitive</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#autoformat"><span class="nav-number">3.17.</span> <span class="nav-text">autoformat</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Tabout"><span class="nav-number">3.18.</span> <span class="nav-text">Tabout</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%A2%9D%E5%A4%96"><span class="nav-number">4.</span> <span class="nav-text">额外</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Lyieu"
      src="/images/avatar/avatar.svg">
  <p class="site-author-name" itemprop="name">Lyieu</p>
  <div class="site-description" itemprop="description">Dreaming</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">31</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">30</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/pilgrimlyieu" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;pilgrimlyieu" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:pilgrimlyieu@outlook.com" title="E-Mail → mailto:pilgrimlyieu@outlook.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>
  <div class="cc-license animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://pilgrimlyieu.github.io/2023/08/vimrc/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar/avatar.svg">
      <meta itemprop="name" content="Lyieu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shrine">
      <meta itemprop="description" content="Dreaming">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="我的 Vim 配置 [已过时] | Shrine">
      <meta itemprop="description" content="本篇博文详细介绍了我 Vim 配置的内容。">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          我的 Vim 配置 [已过时]
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-08-19 14:35:59" itemprop="dateCreated datePublished" datetime="2023-08-19T14:35:59+08:00">2023-08-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2024-02-14 17:19:17" itemprop="dateModified" datetime="2024-02-14T17:19:17+08:00">2024-02-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Vim/" itemprop="url" rel="index"><span itemprop="name">Vim</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Waline：</span>
  
    <a title="waline" href="/2023/08/vimrc/#waline" itemprop="discussionUrl">
      <span class="post-comments-count waline-comment-count" data-path="/2023/08/vimrc/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>47k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>43 分钟</span>
    </span>
</div>

            <div class="post-description">本篇博文详细介绍了我 Vim 配置的内容。</div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><div class="admonition error"><p class="admonition-title">已过时
</p><p>本篇内容已过时，Vim 配置已经发生了翻天覆地的变化，适时会开新篇重写。</p>
</div>
<hr>
<div class="admonition note"><p>因篇幅有限，本篇内容仅包括配置文件 <code>.vimrc</code> 的介绍，最多会稍微提及其余相关配置，但不会作为主要内容。</p>
</div>
<div class="admonition warning"><p>后来我的 AutoHotkey 脚本进行了<a target="_blank" rel="noopener" href="https://github.com/pilgrimlyieu/AutoHotkey-Script/pull/20">由 v1.1 语法转向 v2 语法的重构</a>，因此可能与本文脚本有较大差异。最新以 <a target="_blank" rel="noopener" href="https://github.com/pilgrimlyieu/AutoHotkey-Script">GitHub 仓库</a>为准。</p>
</div>
<p>由于我的配置文件比较杂乱，注释信息少，很多以前配的内容现在已经遗忘了。于是出于加深对自己配置的了解，同时边重温边更新或修正的目的，决定写下这篇博文。<s>也为将来投 NeoVim 打好基础</s>。</p>
<h2 id="设置">设置<a class="header-anchor" href="#设置"></a></h2>
<h3 id="基本">基本<a class="header-anchor" href="#基本"></a></h3>
<p>第一部分 Set 有点多，也没分类，我就每 15 行单拎出来吧。</p>
<p>同时这一部分很多都是网上东拼西凑抄过来的，很多即使我看 help 也不知所以，因此也不会细谈。</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> nocompatible</span><br><span class="line"><span class="keyword">set</span> fileformat=unix</span><br><span class="line"><span class="keyword">set</span> fileencodings=utf-<span class="number">8</span>,gbk2312,gbk,gb18030,cp936</span><br><span class="line"><span class="keyword">set</span> encoding=utf-<span class="number">8</span></span><br><span class="line"><span class="keyword">set</span> nobomb</span><br><span class="line"><span class="keyword">set</span> magic</span><br><span class="line"><span class="keyword">set</span> smartcase</span><br><span class="line"><span class="keyword">set</span> laststatus=<span class="number">2</span></span><br><span class="line"><span class="keyword">set</span> showtabline=<span class="number">2</span></span><br><span class="line"><span class="keyword">set</span> <span class="keyword">history</span>=<span class="number">1024</span></span><br><span class="line"><span class="keyword">set</span> autochdir</span><br><span class="line"><span class="keyword">set</span> whichwrap=<span class="keyword">b</span>,&lt;,&gt;,[,]</span><br><span class="line"><span class="keyword">set</span> backspace=<span class="built_in">indent</span>,eol,start</span><br><span class="line"><span class="keyword">set</span> clipboard+=unnamed</span><br><span class="line"><span class="keyword">set</span> winaltkeys=<span class="keyword">no</span></span><br></pre></td></tr></table></figure>
<p>设置了 <code>magic</code>，大概是为了搜索方便吧。</p>
<p>设置 <code>winaltkeys</code> 为 <code>no</code>，毕竟我要映射 <kbd>Alt</kbd>，同时我不需要用 <kbd>Alt</kbd> 访问菜单（毕竟都没菜单了）。</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> langmenu=zh_CN</span><br><span class="line"><span class="keyword">set</span> cursorline</span><br><span class="line"><span class="keyword">set</span> hlsearch</span><br><span class="line"><span class="keyword">set</span> incsearch</span><br><span class="line"><span class="keyword">set</span> <span class="keyword">number</span></span><br><span class="line"><span class="keyword">set</span> relativenumber</span><br><span class="line"><span class="keyword">set</span> wrap</span><br><span class="line"><span class="keyword">set</span> linebreak</span><br><span class="line"><span class="keyword">set</span> splitbelow</span><br><span class="line"><span class="keyword">set</span> splitright</span><br></pre></td></tr></table></figure>
<p>设置 <code>cursorline</code>，方便看到正在编辑的行。</p>
<p>设置 <code>hlsearch</code>，高亮搜索。</p>
<p>设置 <code>number</code> 和 <code>relativenumber</code>，显示相对行号。</p>
<p>设置 <code>wrap</code> 和 <code>linebreak</code>，长行在相对合理（有时效果不如在最后一个字符断开）地方回绕。</p>
<p>设置 <code>splitbelow</code> 和 <code>splitright</code>，优先向下和向右分割窗口。</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> guioptions-=<span class="keyword">e</span></span><br><span class="line"><span class="keyword">set</span> guioptions-=g</span><br><span class="line"><span class="keyword">set</span> guioptions-=<span class="keyword">m</span></span><br><span class="line"><span class="keyword">set</span> guioptions-=r</span><br><span class="line"><span class="keyword">set</span> guioptions-=L</span><br><span class="line"><span class="keyword">set</span> guioptions-=t</span><br><span class="line"><span class="keyword">set</span> guioptions-=T</span><br><span class="line"><span class="keyword">set</span> autoindent</span><br><span class="line"><span class="keyword">set</span> smartindent</span><br><span class="line"><span class="keyword">set</span> foldmethod=marker</span><br><span class="line"><span class="keyword">set</span> guifont=JetBrains_Mono:h15</span><br><span class="line"><span class="keyword">set</span> guifontwide=Microsoft_Yahei_Mono:h15</span><br></pre></td></tr></table></figure>
<p><code>guioptions</code> 去掉 <code>egmrLtT</code>，好像就啥也不剩了（默认也才 <code>egmrLT</code>）。这样一通设置后，Vim 窗口打开就是下面那样了。</p>
<p><img src="gvim.png" alt=""></p>
<p>当然这还是很不爽，最上面的白框框太突兀了，这时候就要用 AutoHotkey 了。</p>
<figure class="highlight autohotkey"><figcaption><span>Vim.ahk</span><a target="_blank" rel="noopener" href="https://github.com/pilgrimlyieu/AutoHotkey-Script/blob/master/Specific/Vim/Vim.ahk">GitHub</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#Requires AutoHotkey v1.1+</span></span><br><span class="line"></span><br><span class="line">SysGet WorkAreaInfo, MonitorWorkArea</span><br><span class="line"></span><br><span class="line">ListJoin(list, string) &#123;</span><br><span class="line">    for index, content in list</span><br><span class="line">        str .= string . content</span><br><span class="line">    <span class="keyword">return</span> SubStr(str, StrLen(string) + <span class="number">1</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title">!q::</span></span><br><span class="line">Clip := <span class="built_in">ClipboardAll</span></span><br><span class="line"><span class="built_in">Clipboard</span> := <span class="string">&quot;&quot;</span></span><br><span class="line">SendInput &#123;Ctrl Down&#125;c&#123;Ctrl Up&#125;</span><br><span class="line">ClipWait <span class="number">0</span></span><br><span class="line">if InStr(<span class="built_in">Clipboard</span>, <span class="string">&quot;`r`n&quot;</span>)</span><br><span class="line"><span class="built_in">    Run %</span> <span class="string">&quot;gvim -d &quot;</span><span class="string">&quot;&quot;</span> ListJoin(StrSplit(<span class="built_in">Clipboard</span>, <span class="string">&quot;`r`n&quot;</span>), <span class="string">&quot;&quot;</span><span class="string">&quot; &quot;</span><span class="string">&quot;&quot;</span>) <span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span>, , , process_id</span><br><span class="line">else if !<span class="built_in">ErrorLevel</span></span><br><span class="line">    Run gvim <span class="string">&quot;%Clipboard%&quot;</span>, , , process_id</span><br><span class="line">else</span><br><span class="line">    Run gvim, , , process_id</span><br><span class="line">Process Priority, <span class="variable">%process_id%</span>, High</span><br><span class="line">WinWait <span class="keyword">ahk_pid</span> <span class="variable">%process_id%</span>, , <span class="number">10</span></span><br><span class="line">WinSet Style, -<span class="number">0</span>xC40000, <span class="keyword">ahk_pid</span> <span class="variable">%process_id%</span></span><br><span class="line">WinMove <span class="keyword">ahk_pid</span> <span class="variable">%process_id%</span>, , <span class="number">0</span>, <span class="number">0</span>, <span class="variable">%WorkAreaInfoRight%</span>, <span class="variable">%WorkAreaInfoBottom%</span></span><br><span class="line">WinActivate <span class="keyword">ahk_pid</span> <span class="variable">%process_id%</span></span><br><span class="line"><span class="built_in">Clipboard</span> := Clip</span><br><span class="line"><span class="keyword">return</span></span><br></pre></td></tr></table></figure>
<p>AutoHotkey 的内容就不细谈的，毕竟要东拉西扯的话这篇博文不知道要写多长多久。简单来说这个脚本的作用就是按 <kbd>Alt</kbd> + <kbd>Q</kbd> 打开无白框框的 gVim 窗口。</p>
<p>当没选择文件时，直接打开空白窗口；当选择了一个文件时，打开该文件；当选择了多个文件时，对比多个文件。</p>
<p>当然还是有缺陷的：选择文本时会打开文件名为该文本的窗口，多行文本则会进行对比。</p>
<p>但是总的来说还是够用的。快捷键在写，在测试时只是随便赋的，结果一直用到现在，好不好用我也不好评价，习惯了倒是真的。</p>
<p>设置 <code>autoindent</code> 和 <code>smartindent</code>，自动智能缩进。</p>
<p>设置 <code>foldmethod</code> 为 <code>marker</code>，指定用标志折叠。这个设置可能不太好。</p>
<p>设置 <code>guifont</code> 为 <code>JetBrains Mono</code>，<code>guifontwide</code> 为 <code>Microsoft Yahei Mono</code>。微软雅黑 Mono 是为了弥补中文字体而设置的。尝试过设置 Nerd Font，但是怎么弄都不行，于是就放弃了。</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> conceallevel=<span class="number">2</span></span><br><span class="line"><span class="keyword">set</span> wildmenu</span><br><span class="line"><span class="keyword">set</span> scrolloff=<span class="number">10</span></span><br><span class="line"><span class="keyword">set</span> noshowmode</span><br><span class="line"><span class="keyword">set</span> tabstop=<span class="number">4</span></span><br><span class="line"><span class="keyword">set</span> expandtab</span><br><span class="line"><span class="keyword">set</span> softtabstop=<span class="number">4</span></span><br><span class="line"><span class="keyword">set</span> <span class="built_in">shiftwidth</span>=<span class="number">4</span></span><br><span class="line"><span class="keyword">set</span> viewoptions-=<span class="keyword">options</span></span><br><span class="line"><span class="keyword">set</span> <span class="built_in">undofile</span></span><br><span class="line"><span class="keyword">set</span> undodir=D:\Temp\.<span class="keyword">vim</span>\.<span class="keyword">undo</span>\</span><br><span class="line"><span class="keyword">set</span> directory=D:\Temp\.<span class="keyword">vim</span>\.swap\</span><br><span class="line"><span class="keyword">set</span> viewdir=D:\Temp\.<span class="keyword">vim</span>\.<span class="keyword">view</span>\</span><br><span class="line"><span class="keyword">set</span> shortmess+=F</span><br><span class="line"><span class="keyword">set</span> background=dark</span><br><span class="line"><span class="keyword">set</span> listchars=<span class="keyword">tab</span>:!&gt;,trail:·,lead:·</span><br><span class="line"><span class="keyword">set</span> <span class="keyword">list</span></span><br><span class="line"><span class="keyword">set</span> gdefault</span><br><span class="line"><span class="keyword">set</span> titlestring=%&#123;<span class="keyword">mode</span>()&#125;\&amp;%&#123;<span class="variable">v:servername</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> $LANG = <span class="string">&#x27;en_US.UTF-8&#x27;</span></span><br><span class="line"><span class="keyword">let</span> &amp;pythonthreedll = <span class="string">&#x27;D:\Program Files\Python\python310.dll&#x27;</span></span><br></pre></td></tr></table></figure>
<p>设置 <code>wildmenu</code>，应该与补全有关。</p>
<p>设置 <code>scrolloff</code> 为 10，防止蒙着眼横冲直撞。</p>
<p>设置 <code>noshowmode</code>，有了状态栏就不用了。</p>
<p>设置 <code>tabstop</code> 为 4，默认制表符长度为 4 个空格。有时觉得有点长了。同时设置 <code>expandtab</code>，我好像不是很喜欢制表符。<code>softtabstop</code> 应该是相关设置。</p>
<p><code>viewoptions</code> 去掉了 <code>options</code>，<s>于是只剩下 <code>view</code> 了</s>，剩余 <code>folds,cursor,curdir</code>。即下次打开相同文件时保留折叠、光标和窗口目录，不保留局部选项和映射。</p>
<p><code>undodir</code> <code>directory</code> <code>viewdir</code> 分别是「撤销文件位置」「交换文件所在位置」和「view 储存位置」。</p>
<p><code>shortmess</code> 增加 <code>F</code> 变成 <code>filnxtToOSF</code>，这个选项解决了编辑文件时有时会出现要多按一下才能继续编辑的问题。</p>
<p><code>background</code> 设置深色主题。</p>
<p><code>list</code> 和 <code>listchars</code> 设置制表符和首尾空格的显示方式。</p>
<p><code>gdefault</code> 默认全局替换。难怪，我就说为什么有时候开 <code>g</code> 选项反而没有全局替换，原来是开了 <code>gdefault</code> 啊。</p>
<p><code>titlestring</code> 设置为 <code>%{mode()}\&amp;%{v:servername}</code>，像上面一样 <code>n&amp;GVIM2</code> 就是一个例子。第一个字符表示模式。后面 GVIM 表示第一个窗口，GVIM2 表示这是第三个 gVim 窗口。可以用来与 AutoHotkey 交互。下面是一个例子。</p>
<figure class="highlight autohotkey"><figcaption><span>Vim.ahk</span><a target="_blank" rel="noopener" href="https://github.com/pilgrimlyieu/AutoHotkey-Script/blob/master/Specific/Vim/Vim.ahk">GitHub</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#Requires AutoHotkey v1.1+</span></span><br><span class="line"></span><br><span class="line">IsNotEnglish() &#123;</span><br><span class="line">    DetectHiddenWindows On</span><br><span class="line">    WinGet winid, ID, A</span><br><span class="line">    wintitle := <span class="string">&quot;ahk_id &quot;</span> DllCall(<span class="string">&quot;imm32\ImmGetDefaultIMEWnd&quot;</span>, <span class="string">&quot;Uint&quot;</span>, winid, <span class="string">&quot;Uint&quot;</span>)</span><br><span class="line">    SendMessage <span class="number">0</span>x283, <span class="number">0</span>x001, <span class="number">0</span>, , <span class="variable">%wintitle%</span></span><br><span class="line">    DetectHiddenWindows Off</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">ErrorLevel</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#If WinActive(&quot;^(i|s|v|V)&quot;)</span></span><br><span class="line"></span><br><span class="line"><span class="title">CapsLock::</span>SendInput ô</span><br><span class="line"><span class="title">+CapsLock::</span> SendInput &#123;Shift Down&#125;ô&#123;Shift Up&#125;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#If WinActive(&quot;^i&quot;) and IsNotEnglish()</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#Hotstring * C0 ? X</span></span><br><span class="line"></span><br><span class="line"><span class="title">::jkk::</span>SendInput &#123;Esc&#125;</span><br><span class="line"><span class="title">::kjj::</span>SendInput &#123;Esc&#125;</span><br></pre></td></tr></table></figure>
<p><s>在插入、选择、Visual 及多行 Visual 模式下，<kbd>CapsLock</kbd> 会被映射为「ô」（即 <kbd>Alt</kbd> + <kbd>T</kbd>）。</s></p>
<p>已经改为如下所示的快捷键。</p>
<figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#HotIf WinActive(&quot;^(i|s|v|V)&quot;) &amp;&amp; WinActive(&quot;ahk_class Vim&quot;)</span></span><br><span class="line"></span><br><span class="line"><span class="title">CapsLock::</span>SendInput(<span class="string">&quot;&#123;Alt Down&#125;&#123;F12&#125;&#123;Alt Up&#125;&quot;</span>)</span><br><span class="line"><span class="title">+CapsLock::</span>SendInput(<span class="string">&quot;&#123;Alt Down&#125;&#123;Shift Down&#125;&#123;F12&#125;&#123;Shift Up&#125;&#123;Alt Up&#125;&quot;</span>)</span><br><span class="line"><span class="title">^CapsLock::</span>SendInput(<span class="string">&quot;&#123;Ctrl Down&#125;&#123;Alt Down&#125;&#123;F12&#125;&#123;Alt Up&#125;&#123;Ctrl Up&#125;&quot;</span>)</span><br><span class="line"><span class="title">^+CapsLock::</span>SendInput(<span class="string">&quot;&#123;Ctrl Down&#125;&#123;Shift Down&#125;&#123;Alt Down&#125;&#123;F12&#125;&#123;Alt Up&#125;&#123;Shift Up&#125;&#123;Ctrl Up&#125;&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>将 <kbd>CapsLock</kbd> 映射为一个几乎用不到的键 <kbd>Alt</kbd> + <kbd>F12</kbd>，具体内容在讲 UltiSnips 时再谈。</p>
<p>在插入模式且非英文输入下，<kbd>jkk</kbd> 和 <kbd>kjj</kbd> 会退出插入模式。本来用的是 <kbd>jk</kbd> 和 <kbd>kj</kbd>，但是误触率不小（毕竟以这些为辅音的词语可不少），于是改成这样，但是这样导致中文输入下退出难度增大，还没有养成肌肉记忆。</p>
<p><s>当然还有一点弊端，这样咋知道这是 Vim 窗口？一个标题名为「visual」的窗口也会触发，原本是不会的，后来我为了精简标题而删掉无关文本。还是要加个的。</s> 后来加入了 <code>ahk_class</code> 的判断，消除了这个问题。</p>
<p><code>$LANG</code> 设置为 <code>en_US.UTF-8</code>，可能是为了避免提示信息中英混杂吧。</p>
<p><code>&amp;pythonthreedll</code> 设置 Python。有段时间打开 Vim 时一直报错，经过我严密的测试发现问题出在 <a target="_blank" rel="noopener" href="https://github.com/vim/vim/commit/4e7590ec00483077daaa567aa2220bc8df912f3c">Vim 9.0 patch 845</a> 上（根据我的备忘录记录，撰博时未再次测试），也许是编译的人环境发生了变化，我没看出有什么端倪。最后设置了这个才好。</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">filetype</span> plugin <span class="built_in">indent</span> <span class="keyword">on</span></span><br><span class="line"><span class="keyword">syntax</span> enable</span><br><span class="line"></span><br><span class="line"><span class="keyword">colorscheme</span> gruvbox</span><br></pre></td></tr></table></figure>
<p>上面两行设置在了杂项下，主题设置在了插件下。</p>
<h3 id="杂项">杂项<a class="header-anchor" href="#杂项"></a></h3>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&quot; WindowsTerminal &#123;&#123;&#123;1</span></span><br><span class="line"><span class="keyword">if</span> &amp;term == <span class="string">&#x27;win32&#x27;</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">exists</span>(<span class="string">&#x27;+termguicolors&#x27;</span>)</span><br><span class="line">        <span class="keyword">let</span> &amp;t_8f = <span class="string">&quot;\&lt;Esc&gt;[38;2;%lu;%lu;%lum&quot;</span></span><br><span class="line">        <span class="keyword">let</span> &amp;t_8b = <span class="string">&quot;\&lt;Esc&gt;[48;2;%lu;%lu;%lum&quot;</span></span><br><span class="line">        <span class="keyword">set</span> termguicolors</span><br><span class="line">    <span class="keyword">endif</span></span><br><span class="line">    <span class="keyword">let</span> &amp;t_SI .= <span class="string">&quot;\e[5 q&quot;</span></span><br><span class="line">    <span class="keyword">let</span> &amp;t_SR .= <span class="string">&quot;\e[3 q&quot;</span></span><br><span class="line">    <span class="keyword">let</span> &amp;t_EI .= <span class="string">&quot;\e[0 q&quot;</span></span><br><span class="line">    <span class="keyword">autocmd</span> VimEnter * <span class="keyword">silent</span> !echo -ne <span class="string">&quot;\e[0 q&quot;</span></span><br><span class="line">    <span class="keyword">autocmd</span> VimLeave * <span class="keyword">silent</span> !echo -ne <span class="string">&quot;\e[5 q&quot;</span></span><br><span class="line"><span class="keyword">endif</span></span><br><span class="line"><span class="comment">&quot; &#125;&#125;&#125;1</span></span><br></pre></td></tr></table></figure>
<p>备注了个 <code>WindowsTerminal</code>，查了一下应该是修改 Windows Terminal 下 Vim 的光标形状。不过其实我现在用 gVim，完全可以把这个删掉。</p>
<div class="admonition note"><p class="admonition-title">更新
</p><p>已经移除了</p>
</div>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">augroup</span> auto_view</span><br><span class="line"><span class="comment">&quot; auto_view &#123;&#123;&#123;1</span></span><br><span class="line">    autocmd!</span><br><span class="line">    <span class="keyword">autocmd</span> BufWinLeave *.* <span class="keyword">mkview</span></span><br><span class="line">    <span class="keyword">autocmd</span> BufWinEnter *.* <span class="keyword">silent</span> <span class="keyword">loadview</span></span><br><span class="line"><span class="comment">&quot; &#125;&#125;&#125;1</span></span><br><span class="line"><span class="keyword">augroup</span> end</span><br></pre></td></tr></table></figure>
<p>自动记录和加载 view，本来还有 <code>_vimrc</code> 的，但是我改名为 <code>.vimrc</code> 后就删掉了。</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">augroup</span> spell_check</span><br><span class="line"><span class="comment">&quot; spell_check &#123;&#123;&#123;1</span></span><br><span class="line">    autocmd!</span><br><span class="line">    <span class="keyword">autocmd</span> FileType tex,markdown,gitcommit <span class="keyword">setlocal</span> spell spelllang=en_us,cjk</span><br><span class="line">    <span class="keyword">autocmd</span> FileType tex,markdown,gitcommit <span class="keyword">inoremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;C-n&gt;</span> <span class="symbol">&lt;C-g&gt;</span><span class="keyword">u</span><span class="symbol">&lt;Esc&gt;</span>[s1z=`<span class="string">&#x27;a&lt;C-g&gt;u</span></span><br><span class="line"><span class="string">&quot; &#125;&#125;&#125;1</span></span><br><span class="line"><span class="string">augroup end</span></span><br></pre></td></tr></table></figure>
<p>自动更正拼写，目前用于 markdown, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>TeX</mtext></mrow><annotation encoding="application/x-tex">\TeX</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8988em;vertical-align:-0.2155em;"></span><span class="mord text"><span class="mord textrm">T</span><span class="mspace" style="margin-right:-0.1667em;"></span><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.4678em;"><span style="top:-2.7845em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord textrm">E</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2155em;"><span></span></span></span></span><span class="mspace" style="margin-right:-0.125em;"></span><span class="mord textrm">X</span></span></span></span></span> 和 Git commit 信息。使用快捷键 <kbd>Ctrl</kbd> + <kbd>N</kbd>。Castel 的原映射如下。我不知道怎么改了一点，我记得我在用 Castel 的映射时出现了一点问题，于是进行了部分修改。</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line"><span class="keyword">inoremap</span> <span class="symbol">&lt;C-l&gt;</span> <span class="symbol">&lt;c-g&gt;</span><span class="keyword">u</span><span class="symbol">&lt;Esc&gt;</span>[s1z=`]<span class="keyword">a</span><span class="symbol">&lt;c-g&gt;</span><span class="keyword">u</span></span><br></pre></td></tr></table></figure>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&quot; win-clipboard &#123;&#123;&#123;1</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:clipboard</span> = &#123;</span><br><span class="line">\ <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;win32yank&#x27;</span>,</span><br><span class="line">\ <span class="string">&#x27;copy&#x27;</span>: &#123;</span><br><span class="line">\ <span class="string">&#x27;+&#x27;</span>: <span class="string">&#x27;win32yank.exe -i --crlf&#x27;</span>,</span><br><span class="line">\ <span class="string">&#x27;*&#x27;</span>: <span class="string">&#x27;win32yank.exe -i --crlf&#x27;</span>,</span><br><span class="line">\ &#125;,</span><br><span class="line">\ <span class="string">&#x27;paste&#x27;</span>: &#123;</span><br><span class="line">\ <span class="string">&#x27;+&#x27;</span>: <span class="string">&#x27;win32yank.exe -o --lf&#x27;</span>,</span><br><span class="line">\ <span class="string">&#x27;*&#x27;</span>: <span class="string">&#x27;win32yank.exe -o --lf&#x27;</span>,</span><br><span class="line">\ &#125;,</span><br><span class="line">\ <span class="string">&#x27;cache_enabled&#x27;</span>: <span class="number">0</span>,</span><br><span class="line">\ &#125;</span><br><span class="line"><span class="comment">&quot; &#125;&#125;&#125;1</span></span><br></pre></td></tr></table></figure>
<p>好像是用来互通剪贴板的？</p>
<h3 id="插件">插件<a class="header-anchor" href="#插件"></a></h3>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">g:language_types</span> = [<span class="string">&#x27;python&#x27;</span>, <span class="string">&#x27;javascript&#x27;</span>, <span class="string">&#x27;vim&#x27;</span>, <span class="string">&#x27;autohotkey&#x27;</span>]</span><br><span class="line"><span class="keyword">call</span> plug#begin(<span class="string">&quot;~/vimfiles/plugged&quot;</span>)</span><br><span class="line"><span class="comment">&quot; Plug &#123;&#123;&#123;1</span></span><br><span class="line">Plug <span class="string">&#x27;morhetz/gruvbox&#x27;</span></span><br><span class="line">Plug <span class="string">&#x27;yianwillis/vimcdoc&#x27;</span></span><br><span class="line">Plug <span class="string">&#x27;preservim/nerdtree&#x27;</span></span><br><span class="line">Plug <span class="string">&#x27;Xuyuanp/nerdtree-git-plugin&#x27;</span></span><br><span class="line">Plug <span class="string">&#x27;itchyny/lightline.vim&#x27;</span></span><br><span class="line">Plug <span class="string">&#x27;mengelbrecht/lightline-bufferline&#x27;</span></span><br><span class="line">Plug <span class="string">&#x27;maximbaz/lightline-ale&#x27;</span>,        &#123; <span class="string">&#x27;for&#x27;</span>: <span class="variable">g:language_types</span> &#125;</span><br><span class="line">Plug <span class="string">&#x27;mhinz/vim-startify&#x27;</span></span><br><span class="line">Plug <span class="string">&#x27;junegunn/vim-easy-align&#x27;</span></span><br><span class="line">Plug <span class="string">&#x27;neoclide/coc.nvim&#x27;</span>,             &#123; <span class="string">&#x27;branch&#x27;</span>: <span class="string">&#x27;release&#x27;</span> &#125;</span><br><span class="line">Plug <span class="string">&#x27;dense-analysis/ale&#x27;</span>,            &#123; <span class="string">&#x27;for&#x27;</span>: <span class="variable">g:language_types</span> &#125;</span><br><span class="line">Plug <span class="string">&#x27;SirVer/ultisnips&#x27;</span></span><br><span class="line">Plug <span class="string">&#x27;Yggdroot/LeaderF&#x27;</span></span><br><span class="line">Plug <span class="string">&#x27;tpope/vim-fugitive&#x27;</span></span><br><span class="line">Plug <span class="string">&#x27;tpope/vim-commentary&#x27;</span></span><br><span class="line">Plug <span class="string">&#x27;tpope/vim-repeat&#x27;</span></span><br><span class="line">Plug <span class="string">&#x27;pilgrimlyieu/vim-surround&#x27;</span></span><br><span class="line">Plug <span class="string">&#x27;easymotion/vim-easymotion&#x27;</span></span><br><span class="line">Plug <span class="string">&#x27;ZSaberLv0/vim-easymotion-chs&#x27;</span></span><br><span class="line">Plug <span class="string">&#x27;mg979/vim-visual-multi&#x27;</span></span><br><span class="line">Plug <span class="string">&#x27;luochen1990/rainbow&#x27;</span></span><br><span class="line">Plug <span class="string">&#x27;Yggdroot/indentLine&#x27;</span></span><br><span class="line">Plug <span class="string">&#x27;lervag/vimtex&#x27;</span>,                 &#123; <span class="string">&#x27;for&#x27;</span>: [<span class="string">&#x27;tex&#x27;</span>, <span class="string">&#x27;markdown&#x27;</span>] &#125;</span><br><span class="line">Plug <span class="string">&#x27;pilgrimlyieu/md-img-paste.vim&#x27;</span>, &#123; <span class="string">&#x27;for&#x27;</span>: <span class="string">&#x27;markdown&#x27;</span> &#125;</span><br><span class="line">Plug <span class="string">&#x27;mzlogin/vim-markdown-toc&#x27;</span>,      &#123; <span class="string">&#x27;for&#x27;</span>: <span class="string">&#x27;markdown&#x27;</span>&#125;</span><br><span class="line">Plug <span class="string">&#x27;python-mode/python-mode&#x27;</span>,       &#123; <span class="string">&#x27;for&#x27;</span>: <span class="string">&#x27;python&#x27;</span>, <span class="string">&#x27;branch&#x27;</span>: <span class="string">&#x27;develop&#x27;</span> &#125;</span><br><span class="line">Plug <span class="string">&#x27;rrethy/vim-hexokinase&#x27;</span>,         &#123; <span class="string">&#x27;do&#x27;</span>: <span class="string">&#x27;make hexokinase&#x27;</span> &#125;</span><br><span class="line">Plug <span class="string">&#x27;vim-autoformat/vim-autoformat&#x27;</span></span><br><span class="line"><span class="comment">&quot; &#125;&#125;&#125;1</span></span><br><span class="line"><span class="keyword">call</span> plug#end()</span><br></pre></td></tr></table></figure>
<p><code>gruvbox</code>：主题。</p>
<p><code>vimcdoc</code>：中文文档。</p>
<p><code>nerdtree</code>：显示文件列表。</p>
<p><code>nerdtree-git-plugin</code>：NerdTree 集成 Git。</p>
<p><code>lightline</code>：状态栏。</p>
<p><code>lightline-bufferline</code>：缓冲区栏。</p>
<p><code>lightline-ale</code>：状态栏显示语法警告错误信息等。</p>
<p><code>vim-startify</code>：开始面板。没怎么见过，也就没修改了，使用了默认的。</p>
<p><code>vim-easy-align</code>：对齐。</p>
<p><code>coc.nvim</code>：代码补全。</p>
<p><code>ale</code>：语法检查。</p>
<p><code>ultisnips</code>：Snippets 工具。</p>
<p><code>LeaderF</code>：搜索。</p>
<p><code>vim-fugitive</code>：Git。</p>
<p><code>vim-commentary</code>：注释。</p>
<p><code>vim-repeat</code>：重复操作（为适配部分插件如 <code>vim-surround</code> 等）</p>
<p><code>vim-surround</code>：添加引号、括号、标签等。因为作者不知出于什么原因没有 merge 一个重要 <a target="_blank" rel="noopener" href="https://github.com/tpope/vim-surround/pull/355">PR: Support deleting/changing custom surrounds</a>，我就 Fork 了一个（没用 PR 作者的，怕他删掉了）。</p>
<p><code>vim-easymotion</code>：快速移动。</p>
<p><code>vim-easymotion-chs</code>：为快速移动添加中文拼音支持。</p>
<p><code>vim-visual-multi</code>：多光标。</p>
<p><code>rainbow</code>：彩色括号。</p>
<p><code>indentLine</code>：缩进线。刚刚去看才发现 archived 了。</p>
<p><code>vimtex</code>：提供 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>TeX</mtext></mrow><annotation encoding="application/x-tex">\TeX</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8988em;vertical-align:-0.2155em;"></span><span class="mord text"><span class="mord textrm">T</span><span class="mspace" style="margin-right:-0.1667em;"></span><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.4678em;"><span style="top:-2.7845em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord textrm">E</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2155em;"><span></span></span></span></span><span class="mspace" style="margin-right:-0.125em;"></span><span class="mord textrm">X</span></span></span></span></span> 及 markdown 数学支持。</p>
<p><code>md-img-paste.vim</code>：markdown 插入剪贴板图片。我根据自己需求 Fork 然后改了一点。前些日子里不小心 Revert 了，靠本地文件恢复，只是就不知道我落后几个 commits 了，也许有些错误修复。</p>
<p><code>vim-markdown-toc</code>：创建目录。只不过现在似乎用处不大。</p>
<p><code>python-mode</code>：Python 支持。感觉也用处不大。Python 写得少，<s>要么摸鱼要么在写 AutoHotkey</s>，而且我 Python 可能不在 Vim 里写。</p>
<p><code>vim-hexokinase</code>：显示色彩。有时倒让人啼笑皆非，例如微软的 Azure 也会显示颜色。这个去看发现也 archived 了。看到它有个 <a target="_blank" rel="noopener" href="https://github.com/kaymmm/vim-hexokinase">Fork</a> 有 10 多个 commits ahead，看样子是添加了 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>LaTeX</mtext></mrow><annotation encoding="application/x-tex">\LaTeX</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8988em;vertical-align:-0.2155em;"></span><span class="mord text"><span class="mord textrm">L</span><span class="mspace" style="margin-right:-0.36em;"></span><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6833em;"><span style="top:-2.905em;"><span class="pstrut" style="height:2.7em;"></span><span class="mord"><span class="mord textrm mtight sizing reset-size6 size3">A</span></span></span></span></span></span><span class="mspace" style="margin-right:-0.15em;"></span><span class="mord text"><span class="mord textrm">T</span><span class="mspace" style="margin-right:-0.1667em;"></span><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.4678em;"><span style="top:-2.7845em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord textrm">E</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2155em;"><span></span></span></span></span><span class="mspace" style="margin-right:-0.125em;"></span><span class="mord textrm">X</span></span></span></span></span></span> 相关支持。</p>
<p><code>vim-autoformat</code>：格式化代码。</p>
<h2 id="映射">映射<a class="header-anchor" href="#映射"></a></h2>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">g:mapleader</span> = <span class="string">&quot; &quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function!</span> <span class="title">Execute</span><span class="params">(cmd)</span></span><br><span class="line">    <span class="keyword">execute</span> <span class="variable">a:cmd</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">endfunction</span></span><br></pre></td></tr></table></figure>
<p>设置 <kbd>Leader</kbd> 键为空格键。同时定义一个执行函数方便调用。</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">inoremap</span> jk      <span class="symbol">&lt;Esc&gt;</span></span><br><span class="line"><span class="keyword">inoremap</span> kj      <span class="symbol">&lt;Esc&gt;</span></span><br><span class="line"><span class="keyword">nnoremap</span> U       <span class="symbol">&lt;C-r&gt;</span></span><br><span class="line"><span class="keyword">vnoremap</span> ;       :</span><br><span class="line"><span class="keyword">nnoremap</span> ;       :</span><br><span class="line"><span class="keyword">nnoremap</span> :       ,</span><br><span class="line"><span class="keyword">nnoremap</span> ,       ;</span><br><span class="line"><span class="keyword">nnoremap</span> `       <span class="string">&#x27;</span></span><br><span class="line"><span class="string">nnoremap &#x27;</span>       `</span><br><span class="line"><span class="keyword">noremap</span>  H       <span class="number">0</span></span><br><span class="line"><span class="keyword">onoremap</span> H       <span class="number">0</span></span><br><span class="line"><span class="keyword">noremap</span>  L       $</span><br><span class="line"><span class="keyword">onoremap</span> L       $</span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;expr&gt;</span><span class="number">0</span> <span class="keyword">col</span>(<span class="string">&#x27;.&#x27;</span>) == <span class="number">1</span> ? <span class="string">&#x27;^&#x27;</span> : <span class="string">&#x27;0&#x27;</span></span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;C-f&gt;</span> <span class="symbol">&lt;C-d&gt;</span></span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;C-b&gt;</span> <span class="symbol">&lt;C-u&gt;</span></span><br></pre></td></tr></table></figure>
<p><kbd>jk</kbd> 和 <kbd>kj</kbd> 上面谈过了。</p>
<p><kbd>U</kbd> 重做。</p>
<p><kbd>;</kbd> 进入命令模式，这样只用按一个键，比较方便。</p>
<p><kbd>,</kbd> 重复寻找命令，因为 <kbd>;</kbd> 被占用了，用 <kbd>,</kbd> 替代。</p>
<p><kbd>:</kbd> 用来反向寻找。原因同上。</p>
<p>交换了 <kbd>'</kbd> 和 <kbd>`</kbd>，精准位置应该更方便按才行。</p>
<p><kbd>H</kbd> 和 <kbd>L</kbd> 分别到行首和行尾。</p>
<p><kbd>0</kbd> 可以在行首和行首非空白字符跳转。</p>
<p>剩下两个就是翻页了，改为翻半页（用整页主要是因为好按）。</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;silent&gt;</span> <span class="symbol">&lt;leader&gt;</span><span class="keyword">o</span> :<span class="symbol">&lt;C-u&gt;</span><span class="keyword">call</span> <span class="keyword">append</span>(<span class="built_in">line</span>(<span class="string">&quot;.&quot;</span>),   <span class="built_in">repeat</span>([<span class="string">&quot;&quot;</span>], <span class="variable">v:count1</span>))<span class="symbol">&lt;CR&gt;</span></span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;silent&gt;</span> <span class="symbol">&lt;leader&gt;</span>O :<span class="symbol">&lt;C-u&gt;</span><span class="keyword">call</span> <span class="keyword">append</span>(<span class="built_in">line</span>(<span class="string">&quot;.&quot;</span>)-<span class="number">1</span>, <span class="built_in">repeat</span>([<span class="string">&quot;&quot;</span>], <span class="variable">v:count1</span>))<span class="symbol">&lt;CR&gt;</span></span><br></pre></td></tr></table></figure>
<p>用来在 normal 模式插入空行（光标位置不动），摘抄自 <a target="_blank" rel="noopener" href="https://vi.stackexchange.com/a/3881">Stack Overflow</a></p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;leader&gt;</span>/ :<span class="keyword">noh</span><span class="symbol">&lt;Cr&gt;</span></span><br><span class="line"><span class="keyword">vnoremap</span> /                 /\v</span><br><span class="line"><span class="keyword">nnoremap</span> ?                 ?\v</span><br><span class="line"><span class="keyword">vnoremap</span> ?                 ?\v</span><br></pre></td></tr></table></figure>
<p>查找。<kbd>Space</kbd> + <kbd>/</kbd> 清除高亮搜索结果。<code>\v</code> 应该是为了更 Magic。</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">inoremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;C-j&gt;</span> <span class="symbol">&lt;C-r&gt;</span>=Execute(<span class="string">&#x27;normal! &lt;C-v&gt;&lt;C-w&gt;j&lt;C-v&gt;&lt;Esc&gt;&#x27;</span>)<span class="symbol">&lt;Cr&gt;</span></span><br><span class="line"><span class="keyword">inoremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;C-k&gt;</span> <span class="symbol">&lt;C-r&gt;</span>=Execute(<span class="string">&#x27;normal! &lt;C-v&gt;&lt;C-w&gt;k&lt;C-v&gt;&lt;Esc&gt;&#x27;</span>)<span class="symbol">&lt;Cr&gt;</span></span><br><span class="line"><span class="keyword">inoremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;C-h&gt;</span> <span class="symbol">&lt;C-r&gt;</span>=Execute(<span class="string">&#x27;normal! &lt;C-v&gt;&lt;C-w&gt;h&lt;C-v&gt;&lt;Esc&gt;&#x27;</span>)<span class="symbol">&lt;Cr&gt;</span></span><br><span class="line"><span class="keyword">inoremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;C-l&gt;</span> <span class="symbol">&lt;C-r&gt;</span>=Execute(<span class="string">&#x27;normal! &lt;C-v&gt;&lt;C-w&gt;l&lt;C-v&gt;&lt;Esc&gt;&#x27;</span>)<span class="symbol">&lt;Cr&gt;</span></span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;C-j&gt;</span>         <span class="symbol">&lt;C-W&gt;</span><span class="keyword">j</span></span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;C-k&gt;</span>         <span class="symbol">&lt;C-W&gt;</span><span class="keyword">k</span></span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;C-h&gt;</span>         <span class="symbol">&lt;C-W&gt;</span>h</span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;C-l&gt;</span>         <span class="symbol">&lt;C-W&gt;</span><span class="keyword">l</span></span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;C-S-j&gt;</span>       <span class="symbol">&lt;C-W&gt;</span>-</span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;C-S-k&gt;</span>       <span class="symbol">&lt;C-W&gt;</span>+</span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;C-S-h&gt;</span>       <span class="symbol">&lt;C-W&gt;</span>&lt;</span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;C-S-l&gt;</span>       <span class="symbol">&lt;C-W&gt;</span>&gt;</span><br></pre></td></tr></table></figure>
<p>这些是用来调整窗口的。窗口切换不用多说，插入和普通模式都加入了。窗口大小的变动遵循「上加下减，左减右加」原则，即按左下角窗口的视角调整。</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">nnoremap</span> <span class="keyword">k</span>  gk</span><br><span class="line"><span class="keyword">nnoremap</span> gk <span class="keyword">k</span></span><br><span class="line"><span class="keyword">nnoremap</span> <span class="keyword">j</span>  gj</span><br><span class="line"><span class="keyword">nnoremap</span> gj <span class="keyword">j</span></span><br></pre></td></tr></table></figure>
<p>回绕处理。</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line"><span class="keyword">nnoremap</span> gA ga</span><br></pre></td></tr></table></figure>
<p><kbd>ga</kbd> 用来对齐了，用 <kbd>gA</kbd> 接任显示 ASCII 值的任务。</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">inoremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;C-s&gt;</span>     <span class="symbol">&lt;C-r&gt;</span>=Execute(<span class="string">&#x27;w&#x27;</span>)<span class="symbol">&lt;Cr&gt;</span></span><br><span class="line"><span class="keyword">inoremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;C-q&gt;</span>     <span class="symbol">&lt;C-r&gt;</span>=Execute(<span class="string">&#x27;x&#x27;</span>)<span class="symbol">&lt;Cr&gt;</span></span><br><span class="line"><span class="keyword">inoremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;C-S-q&gt;</span>   <span class="symbol">&lt;C-r&gt;</span>=Execute(<span class="string">&#x27;q!&#x27;</span>)<span class="symbol">&lt;Cr&gt;</span></span><br><span class="line"><span class="keyword">inoremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;C-S-c&gt;</span>   <span class="symbol">&lt;C-r&gt;</span>=Execute(<span class="string">&#x27;bw&#x27;</span>)<span class="symbol">&lt;Cr&gt;</span></span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;C-q&gt;</span>             ZZ</span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;C-S-q&gt;</span>           ZQ</span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;C-s&gt;</span>     :<span class="keyword">w</span><span class="symbol">&lt;Cr&gt;</span></span><br><span class="line"><span class="comment">&quot; nnoremap &lt;silent&gt;&lt;C-S-c&gt;   :bw&lt;Cr&gt;</span></span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;leader&gt;</span>q         ZZ</span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;leader&gt;</span>Q         ZQ</span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;leader&gt;</span><span class="keyword">w</span> :<span class="keyword">w</span><span class="symbol">&lt;Cr&gt;</span></span><br><span class="line"><span class="comment">&quot; nnoremap &lt;silent&gt;&lt;leader&gt;C :bw&lt;Cr&gt;</span></span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;S-Esc&gt;</span>   :qa!<span class="symbol">&lt;Cr&gt;</span></span><br><span class="line"><span class="keyword">vnoremap</span> <span class="symbol">&lt;C-q&gt;</span>             <span class="symbol">&lt;Esc&gt;</span>ZZ</span><br><span class="line"><span class="keyword">vnoremap</span> <span class="symbol">&lt;C-S-q&gt;</span>           <span class="symbol">&lt;Esc&gt;</span>ZQ</span><br><span class="line"><span class="keyword">vnoremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;C-s&gt;</span>     <span class="symbol">&lt;Esc&gt;</span>:<span class="keyword">w</span><span class="symbol">&lt;Cr&gt;</span></span><br><span class="line"><span class="comment">&quot; vnoremap &lt;silent&gt;&lt;C-S-c&gt;   &lt;Esc&gt;:bw&lt;Cr&gt;</span></span><br><span class="line"><span class="keyword">vnoremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;S-Esc&gt;</span>   <span class="symbol">&lt;Esc&gt;</span>:qa!<span class="symbol">&lt;Cr&gt;</span></span><br></pre></td></tr></table></figure>
<p>基本上就是保存和退出命令。不知道为什么注释了几个清除缓冲区的，但是我也不敢动。</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tnoremap <span class="symbol">&lt;F1&gt;</span>           &lt;C-\&gt;<span class="symbol">&lt;C-N&gt;</span></span><br><span class="line">tnoremap <span class="symbol">&lt;S-F1&gt;</span>         <span class="symbol">&lt;C-W&gt;</span><span class="symbol">&lt;C-C&gt;</span></span><br><span class="line">tnoremap <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;S-F5&gt;</span> <span class="symbol">&lt;C-W&gt;</span><span class="keyword">N</span>:bw!<span class="symbol">&lt;Cr&gt;</span></span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;S-F5&gt;</span> :<span class="keyword">call</span> CloseTerminal()<span class="symbol">&lt;CR&gt;</span></span><br></pre></td></tr></table></figure>
<p>终端。可以说大概是我的 <code>.vimrc</code> 里自主完成最精致的一部分了。这部分只是映射罢了。<kbd>F1</kbd> 暂停终端，切换到终端普通模式。<kbd>Shift</kbd> + <kbd>F1</kbd> 结束作业。<kbd>Shift</kbd> + <kbd>F5</kbd> 抹杀终端。</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">nnoremap</span> Q  <span class="symbol">&lt;Nop&gt;</span></span><br><span class="line"><span class="keyword">nnoremap</span> gq Q</span><br></pre></td></tr></table></figure>
<p>经常误触进入 Ex 模式，改成 <kbd>gq</kbd>。</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> mouse=</span><br><span class="line"><span class="keyword">noremap</span>  <span class="symbol">&lt;ScrollWheelUp&gt;</span>   <span class="symbol">&lt;nop&gt;</span></span><br><span class="line"><span class="keyword">noremap</span>  <span class="symbol">&lt;ScrollWheelDown&gt;</span> <span class="symbol">&lt;nop&gt;</span></span><br><span class="line"><span class="keyword">inoremap</span> <span class="symbol">&lt;ScrollWheelUp&gt;</span>   <span class="symbol">&lt;nop&gt;</span></span><br><span class="line"><span class="keyword">inoremap</span> <span class="symbol">&lt;ScrollWheelDown&gt;</span> <span class="symbol">&lt;nop&gt;</span></span><br></pre></td></tr></table></figure>
<p>禁用鼠标。</p>
<h2 id="插件-2">插件<a class="header-anchor" href="#插件-2"></a></h2>
<p>这里的下辖标题不代表插件名称，只代表这在我的 <code>.vimrc</code> 被放在一个 part 里。出于「历史原因」，可能会莫名其妙。</p>
<h3 id="vim-surround">vim-surround<a class="header-anchor" href="#vim-surround"></a></h3>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&quot; Custom Surroundings &#123;&#123;&#123;1</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:surround_</span>&#123;<span class="built_in">char2nr</span>(<span class="string">&#x27;（&#x27;</span>)&#125; = <span class="string">&quot;（\r）&quot;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:surround_</span>&#123;<span class="built_in">char2nr</span>(<span class="string">&#x27;）&#x27;</span>)&#125; = <span class="string">&quot;（\r）&quot;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:surround_</span>&#123;<span class="built_in">char2nr</span>(<span class="string">&#x27;【&#x27;</span>)&#125; = <span class="string">&quot;【\r】&quot;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:surround_</span>&#123;<span class="built_in">char2nr</span>(<span class="string">&#x27;】&#x27;</span>)&#125; = <span class="string">&quot;【\r】&quot;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:surround_</span>&#123;<span class="built_in">char2nr</span>(<span class="string">&#x27;《&#x27;</span>)&#125; = <span class="string">&quot;《\r》&quot;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:surround_</span>&#123;<span class="built_in">char2nr</span>(<span class="string">&#x27;》&#x27;</span>)&#125; = <span class="string">&quot;《\r》&quot;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:surround_</span>&#123;<span class="built_in">char2nr</span>(<span class="string">&#x27;‘&#x27;</span>)&#125;  = <span class="string">&quot;「\r」&quot;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:surround_</span>&#123;<span class="built_in">char2nr</span>(<span class="string">&#x27;’&#x27;</span>)&#125;  = <span class="string">&quot;「\r」&quot;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:surround_</span>&#123;<span class="built_in">char2nr</span>(<span class="string">&#x27;“&#x27;</span>)&#125;  = <span class="string">&quot;『\r』&quot;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:surround_</span>&#123;<span class="built_in">char2nr</span>(<span class="string">&#x27;”&#x27;</span>)&#125;  = <span class="string">&quot;『\r』&quot;</span></span><br><span class="line"><span class="comment">&quot; &#125;&#125;&#125;1</span></span><br></pre></td></tr></table></figure>
<p>加入了中文标点。不过「【】」没啥用的样子。</p>
<h3 id="Markdown">Markdown<a class="header-anchor" href="#Markdown"></a></h3>
<p>这就来了，不是插件。</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&quot; Markdown &#123;&#123;&#123;1</span></span><br><span class="line"><span class="comment">&quot; autocmd FileType markdown inoremap &lt;silent&gt;&lt;C-x&gt;      &lt;Cr&gt;&lt;Cr&gt;&lt;hr class=&#x27;section&#x27;&gt;&lt;Cr&gt;&lt;Cr&gt;</span></span><br><span class="line"><span class="keyword">autocmd</span> FileType markdown <span class="keyword">inoremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;C-p&gt;</span>      <span class="symbol">&lt;C-r&gt;</span>=Execute(<span class="string">&#x27;call mdip#MarkdownClipboardImage()&#x27;</span>)<span class="symbol">&lt;Cr&gt;</span></span><br><span class="line"><span class="keyword">autocmd</span> FileType markdown <span class="keyword">inoremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;C-t&gt;</span>      <span class="symbol">&lt;C-r&gt;</span>=Execute(<span class="string">&#x27;UpdateToc&#x27;</span>)<span class="symbol">&lt;Cr&gt;</span></span><br><span class="line"><span class="keyword">autocmd</span> FileType markdown <span class="keyword">nnoremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;leader&gt;</span>mt :UpdateToc<span class="symbol">&lt;Cr&gt;</span></span><br><span class="line"><span class="keyword">autocmd</span> FileType markdown <span class="keyword">vnoremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;leader&gt;</span>vl <span class="symbol">&lt;Plug&gt;</span>(EasyAlign)*<span class="symbol">&lt;C-x&gt;</span>\\\@&lt;!<span class="symbol">&lt;Bar&gt;</span><span class="symbol">&lt;Cr&gt;</span></span><br><span class="line"><span class="keyword">autocmd</span> FileType markdown <span class="keyword">vnoremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;leader&gt;</span>vr <span class="symbol">&lt;Plug&gt;</span>(EasyAlign)*<span class="symbol">&lt;C-a&gt;</span><span class="symbol">&lt;Bs&gt;</span>r<span class="symbol">&lt;Cr&gt;</span><span class="symbol">&lt;C-x&gt;</span>\\\@&lt;!<span class="symbol">&lt;Bar&gt;</span><span class="symbol">&lt;Cr&gt;</span></span><br><span class="line"><span class="keyword">autocmd</span> FileType markdown <span class="keyword">vnoremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;leader&gt;</span>vv <span class="symbol">&lt;Plug&gt;</span>(EasyAlign)*<span class="symbol">&lt;C-a&gt;</span><span class="symbol">&lt;Bs&gt;</span><span class="keyword">c</span><span class="symbol">&lt;Cr&gt;</span><span class="symbol">&lt;C-x&gt;</span>\\\@&lt;!<span class="symbol">&lt;Bar&gt;</span><span class="symbol">&lt;Cr&gt;</span></span><br><span class="line"><span class="keyword">autocmd</span> FileType markdown <span class="keyword">nnoremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;leader&gt;</span>vl <span class="symbol">&lt;Plug&gt;</span>(EasyAlign)ip*<span class="symbol">&lt;C-x&gt;</span>\\\@&lt;!<span class="symbol">&lt;Bar&gt;</span><span class="symbol">&lt;Cr&gt;</span></span><br><span class="line"><span class="keyword">autocmd</span> FileType markdown <span class="keyword">nnoremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;leader&gt;</span>vr <span class="symbol">&lt;Plug&gt;</span>(EasyAlign)ip*<span class="symbol">&lt;C-a&gt;</span><span class="symbol">&lt;Bs&gt;</span>r<span class="symbol">&lt;Cr&gt;</span><span class="symbol">&lt;C-x&gt;</span>\\\@&lt;!<span class="symbol">&lt;Bar&gt;</span><span class="symbol">&lt;Cr&gt;</span></span><br><span class="line"><span class="keyword">autocmd</span> FileType markdown <span class="keyword">nnoremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;leader&gt;</span>vv <span class="symbol">&lt;Plug&gt;</span>(EasyAlign)ip*<span class="symbol">&lt;C-a&gt;</span><span class="symbol">&lt;Bs&gt;</span><span class="keyword">c</span><span class="symbol">&lt;Cr&gt;</span><span class="symbol">&lt;C-x&gt;</span>\\\@&lt;!<span class="symbol">&lt;Bar&gt;</span><span class="symbol">&lt;Cr&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">autocmd</span> FileType markdown inoreabbr <span class="symbol">&lt;silent&gt;</span>toc <span class="symbol">&lt;C-r&gt;</span>=Execute(<span class="string">&#x27;GenTocGFM&#x27;</span>)<span class="symbol">&lt;Cr&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">autocmd</span> FileType markdown <span class="keyword">let</span> <span class="variable">b:coc_pairs_disabled</span> = [<span class="string">&quot;&#x27;&quot;</span>]</span><br></pre></td></tr></table></figure>
<p>第一个是 <kbd>Ctrl</kbd> + <kbd>X</kbd> 添加特制分隔符，用于已经弃用的高中 ENotebook。因此注释掉了。</p>
<p>然后是 <kbd>Ctrl</kbd> + <kbd>P</kbd> 加入图片及 <kbd>Ctrl</kbd> + <kbd>T</kbd> 更新目录，都是插入模式的。正常模式则是 <kbd>Space</kbd> + <kbd>M</kbd> + <kbd>T</kbd></p>
<p>接下来六个如果我没记错的话是表格对齐，前缀是 <kbd>Space</kbd> + <kbd>V</kbd>，然后 <kbd>l</kbd> <kbd>r</kbd> <kbd>v</kbd> 分别代表左、右、中对齐。</p>
<p><kbd>toc</kbd> 则是从没用过的缩写，生成 GFM 格式的 TOC。</p>
<p><code>b:coc_pairs_disabled</code> 则是 <code>coc-pairs</code> 的一个选项，我设置不会自动补全 <code>'</code>，理由忘了，但这种莫名其妙的设置一定是有深意的，所以也就不动了。</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">g:vmt_auto_update_on_save</span> = <span class="number">0</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:vmt_fence_text</span>          = <span class="string">&#x27;TOC Start&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:vmt_fence_closing_text</span>  = <span class="string">&#x27;TOC End&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:vmt_list_item_char</span>      = <span class="string">&#x27;-&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:mdip_imgdir</span>             = <span class="string">&#x27;images&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:mdip_imgname</span>            = <span class="string">&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<p>TOC 和保存图片的设置，浅显易懂，也没啥好解释的。</p>
<h3 id="VimTeX">VimTeX<a class="header-anchor" href="#VimTeX"></a></h3>
<p>这里比较重量级，毕竟配置内容多，又是到处抄。</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">g:tex_conceal</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; Viewer options: One may configure the viewer either by specifying a built-in</span></span><br><span class="line"><span class="comment">&quot; viewer method:</span></span><br><span class="line"><span class="comment">&quot; let g:vimtex_view_method = &#x27;SumatraPDF&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; Or with a generic interface:</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:vimtex_view_general_viewer</span> = <span class="string">&#x27;SumatraPDF&#x27;</span> </span><br><span class="line"><span class="comment">&quot; let g:vimtex_view_general_options = &#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; SumatraPDF Setting</span></span><br><span class="line"><span class="string">&quot; gvim --servername GVIM --remote-send &quot;</span>&lt;C-\&gt;<span class="symbol">&lt;C-n&gt;</span>:<span class="keyword">drop</span> %<span class="keyword">f</span><span class="symbol">&lt;CR&gt;</span>:%<span class="keyword">l</span><span class="symbol">&lt;CR&gt;</span>:normal! zzzv<span class="symbol">&lt;CR&gt;</span>:<span class="keyword">execute</span> <span class="string">&#x27;drop &#x27;</span> . <span class="built_in">fnameescape</span>(<span class="string">&#x27;%f&#x27;</span>)<span class="symbol">&lt;CR&gt;</span>:%<span class="keyword">l</span><span class="symbol">&lt;CR&gt;</span>:normal! zzzv<span class="symbol">&lt;CR&gt;</span>:<span class="keyword">call</span> <span class="built_in">remote_foreground</span>(<span class="string">&#x27;GVIM&#x27;</span>)<span class="symbol">&lt;CR&gt;</span><span class="symbol">&lt;CR&gt;</span><span class="comment">&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:vimtex_view_general_options</span> = <span class="string">&#x27;-reuse-instance -forward-search @tex @line @pdf&#x27;</span></span><br></pre></td></tr></table></figure>
<p>我似乎关闭了 conceal，这个功能吧不好评价。默认是 <code>admgs</code>，即替换重音/连写体、定界符、数学符号、希腊字母及上下标。</p>
<p>注释掉了 <code>g:vimtex_view_method</code>，采用了 <code>g:vimtex_view_general_viewer</code> 为 <code>SumatraPDF</code>。</p>
<p><code>SumatraPDF Setting</code> 是自己加的注释。应该就是把下面内容加入 SumatraPDF 设置里。</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&quot; VimTeX uses latexmk as the default compiler backend. If you use it, which is</span></span><br><span class="line"><span class="comment">&quot; strongly recommended, you probably don&#x27;t need to configure anything. If you</span></span><br><span class="line"><span class="comment">&quot; want another compiler backend, you can change it as follows. The list of</span></span><br><span class="line"><span class="comment">&quot; supported backends and further explanation is provided in the documentation,</span></span><br><span class="line"><span class="string">&quot; see &quot;</span>:<span class="keyword">help</span> vimtex-<span class="keyword">compiler</span><span class="comment">&quot;.</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:vimtex_compiler_method</span> = <span class="string">&#x27;latexmk&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; Most VimTeX mappings rely on localleader and this can be changed with the</span></span><br><span class="line"><span class="string">&quot; following line. The default is usually fine and is the symbol &quot;</span>\<span class="comment">&quot;.</span></span><br><span class="line"><span class="keyword">let</span> maplocalleader = <span class="string">&quot;,&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:tex_flavor</span> = <span class="string">&quot;latex&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:vimtex_texcount_custom_arg</span> = <span class="string">&quot; -ch -total&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">autocmd</span> FileType tex <span class="keyword">noremap</span> <span class="symbol">&lt;buffer&gt;</span> <span class="symbol">&lt;silent&gt;</span> <span class="symbol">&lt;leader&gt;</span><span class="keyword">lw</span> :VimtexCountWords! <span class="symbol">&lt;CR&gt;</span><span class="symbol">&lt;CR&gt;</span></span><br></pre></td></tr></table></figure>
<p>使用推荐的 <code>latexmk</code> 作为编译后端。同时映射了一个局部 <kbd>Leader</kbd> 键 <kbd>,</kbd>，没怎么用过。</p>
<p><code>g:tex_flavor</code> 采用 <code>latex</code>，没什么好说的。</p>
<p>最后一个选项应该是统计字数什么的。</p>
<p>然后映射了 <kbd>,lw</kbd> 来统计字数。</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">g:Tex_ViewRule_pdf</span> = <span class="string">&#x27;D:\Program Files\SumatraPDF\SumatraPDF.exe -reuse-instance -inverse-search &quot;gvim -c \&quot;:RemoteOpen +\%l \%f\&quot;&quot;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:vimtex_compiler_latexmk_engines</span> = &#123;</span><br><span class="line">    \ <span class="string">&#x27;_&#x27;</span>                : <span class="string">&#x27;-pdf&#x27;</span>,</span><br><span class="line">    \ <span class="string">&#x27;pdflatex&#x27;</span>         : <span class="string">&#x27;-pdf&#x27;</span>,</span><br><span class="line">    \ <span class="string">&#x27;dvipdfex&#x27;</span>         : <span class="string">&#x27;-pdfdvi&#x27;</span>,</span><br><span class="line">    \ <span class="string">&#x27;lualatex&#x27;</span>         : <span class="string">&#x27;-lualatex&#x27;</span>,</span><br><span class="line">    \ <span class="string">&#x27;xelatex&#x27;</span>          : <span class="string">&#x27;-xelatex&#x27;</span>,</span><br><span class="line">    \ <span class="string">&#x27;context (pdftex)&#x27;</span> : <span class="string">&#x27;-pdf -pdflatex=texexec&#x27;</span>,</span><br><span class="line">    \ <span class="string">&#x27;context (luatex)&#x27;</span> : <span class="string">&#x27;-pdf -pdflatex=context&#x27;</span>,</span><br><span class="line">    \ <span class="string">&#x27;context (xetex)&#x27;</span>  : <span class="string">&#x27;-pdf -pdflatex=&#x27;</span><span class="string">&#x27;texexec --xtx&#x27;</span><span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    \&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:vimtex_compiler_latexmk</span> = &#123;</span><br><span class="line">    \ <span class="string">&#x27;out_dir&#x27;</span>  : &#123;-&gt; <span class="string">&#x27;out&#x27;</span>&#125;,</span><br><span class="line">    \ <span class="string">&#x27;callback&#x27;</span>   : <span class="number">1</span>,</span><br><span class="line">    \ <span class="string">&#x27;continuous&#x27;</span> : <span class="number">1</span>,</span><br><span class="line">    \ <span class="string">&#x27;executable&#x27;</span> : <span class="string">&#x27;latexmk&#x27;</span>,</span><br><span class="line">    \ <span class="string">&#x27;hooks&#x27;</span>      : [],</span><br><span class="line">    \ <span class="string">&#x27;options&#x27;</span>    : [</span><br><span class="line">    \   <span class="string">&#x27;-verbose&#x27;</span>,</span><br><span class="line">    \   <span class="string">&#x27;-file-line-error&#x27;</span>,</span><br><span class="line">    \   <span class="string">&#x27;-shell-escape&#x27;</span>,</span><br><span class="line">    \   <span class="string">&#x27;-synctex=1&#x27;</span>,</span><br><span class="line">    \   <span class="string">&#x27;-interaction=nonstopmode&#x27;</span>,</span><br><span class="line">    \ ],</span><br><span class="line">    \&#125;</span><br></pre></td></tr></table></figure>
<p>这些设置都是抄的，不明所以，更是动也不敢动。</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">g:vimtex_syntax_conceal_disable</span>   = <span class="number">1</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:vimtex_quickfix_open_on_warning</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:vimtex_toggle_fractions</span> = &#123;</span><br><span class="line">        \ <span class="string">&#x27;frac&#x27;</span>: <span class="string">&#x27;dfrac&#x27;</span>,</span><br><span class="line">        \ <span class="string">&#x27;dfrac&#x27;</span>: <span class="string">&#x27;frac&#x27;</span>,</span><br><span class="line">        \&#125;</span><br></pre></td></tr></table></figure>
<p>禁用 conceal 及编译警告。</p>
<p>然后是分数切换。</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">augroup</span> vimtex_config</span><br><span class="line">  autocmd!</span><br><span class="line">  <span class="keyword">autocmd</span> User VimtexEventQuit <span class="keyword">call</span> vimtex#compiler#clean(<span class="number">0</span>)</span><br><span class="line"><span class="keyword">augroup</span> end</span><br></pre></td></tr></table></figure>
<p>这个是被我注释掉的。用处是清理副产品。</p>
<p>这个配置得找个机会大改一下。之前不怎么用 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>LaTeX</mtext></mrow><annotation encoding="application/x-tex">\LaTeX</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8988em;vertical-align:-0.2155em;"></span><span class="mord text"><span class="mord textrm">L</span><span class="mspace" style="margin-right:-0.36em;"></span><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6833em;"><span style="top:-2.905em;"><span class="pstrut" style="height:2.7em;"></span><span class="mord"><span class="mord textrm mtight sizing reset-size6 size3">A</span></span></span></span></span></span><span class="mspace" style="margin-right:-0.15em;"></span><span class="mord text"><span class="mord textrm">T</span><span class="mspace" style="margin-right:-0.1667em;"></span><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.4678em;"><span style="top:-2.7845em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord textrm">E</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2155em;"><span></span></span></span></span><span class="mspace" style="margin-right:-0.125em;"></span><span class="mord textrm">X</span></span></span></span></span></span>，但是到后面还是会用到的，得更新一下。</p>
<p>查了一下我配置的出处大概是<a target="_blank" rel="noopener" href="https://destinyenvoy.github.io/2020/09/07/how-to-use-vimtex/">这里</a>。</p>
<h3 id="UltiSnips">UltiSnips<a class="header-anchor" href="#UltiSnips"></a></h3>
<p>万恶之源。</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">g:UltiSnipsExpandTrigger</span>       = <span class="string">&#x27;&lt;C-e&gt;&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:UltiSnipsListSnippets</span>        = <span class="string">&#x27;&lt;S-Tab&gt;&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:UltiSnipsJumpForwardTrigger</span>  = <span class="string">&#x27;ô&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:UltiSnipsJumpBackwardTrigger</span> = <span class="string">&#x27;&lt;S-ô&gt;&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:UltiSnipsEditSplit</span>           = <span class="string">&quot;vertical&quot;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:UltiSnipsSnippetDirectories</span>  = [<span class="string">&#x27;Snips&#x27;</span>]</span><br></pre></td></tr></table></figure>
<p>也很清晰。<kbd>Ctrl</kbd> + <kbd>E</kbd> 触发；<kbd>Shift</kbd> + <kbd>Tab</kbd> 列举；<kbd>CapsLock</kbd> 及 <kbd>Shift</kbd> + <kbd>CapsLock</kbd> 跳转。垂直分割打开编辑窗口；Snippets 存在 <code>Snips</code> 里。</p>
<p>一开始用的是全 <kbd>Tab</kbd>，但是冲突确实严重。然后改成 <kbd>CapsLock</kbd> 触发，<kbd>Tab</kbd> 跳转，但是缩进还是用到了 <kbd>Tab</kbd>。最后完全放弃 <kbd>Tab</kbd>，但是确实不如之前舒服了。<kbd>Ctrl</kbd> + <kbd>E</kbd> 这个键我也觉得不好，可能要改。</p>
<div class="admonition note"><p class="admonition-title">更新
</p><p>全面重制了 UltiSnips 快捷键</p>
</div>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">g:UltiSnipsEditSplit</span>           = <span class="string">&quot;vertical&quot;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:UltiSnipsSnippetDirectories</span>  = [<span class="string">&quot;Snips&quot;</span>]</span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:UltiSnipsListSnippets</span>        = <span class="string">&quot;&lt;C-S-A-F12&gt;&quot;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:UltiSnipsExpandTrigger</span>       = <span class="string">&quot;&lt;C-A-F12&gt;&quot;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:UltiSnipsJumpForwardTrigger</span>  = <span class="string">&quot;&lt;A-F12&gt;&quot;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:UltiSnipsJumpBackwardTrigger</span> = <span class="string">&quot;&lt;A-S-F12&gt;&quot;</span></span><br></pre></td></tr></table></figure>
<p>上面说了将 <kbd>CapsLock</kbd> 映射为了 <kbd>Alt</kbd> + <kbd>F12</kbd>。也就是说 <kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>CapsLock</kbd> 可以显示这里能触发什么 snippets；<kbd>Ctrl</kbd> + <kbd>CapsLock</kbd> 可以展开 snippets；<kbd>CapsLock</kbd> 及 <kbd>Shift</kbd> + <kbd>CapsLock</kbd> 能跳转 tabstops。这个快捷键设置就合理且方便多了。</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">inoremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;A-F12&gt;</span>   <span class="symbol">&lt;C-r&gt;</span>=IncreaseColNumber()<span class="symbol">&lt;Cr&gt;</span></span><br><span class="line"><span class="keyword">inoremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;A-S-F12&gt;</span> <span class="symbol">&lt;C-r&gt;</span>=DecreaseColNumber()<span class="symbol">&lt;Cr&gt;</span></span><br></pre></td></tr></table></figure>
<p>同时还为跳转键加了两个 Tabout 映射，这样即使无法跳转 tabstops 也能起到功效。具体见 Tabout 那里。</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;C-d&gt;</span> <span class="symbol">&lt;Esc&gt;</span>:<span class="keyword">call</span> UltiSnips#RefreshSnippets()<span class="symbol">&lt;Cr&gt;</span></span><br></pre></td></tr></table></figure>
<p>这是用来 Debug Snippets 的。使用 <kbd>Ctrl</kbd> + <kbd>D</kbd> 刷新 Snippets。唯一不足就是 <code>pythonx</code> 文件的修改仍然需要重启。</p>
<div class="admonition note"><p class="admonition-title">2023 年 9 月 29 日更新
</p><p>在魔改 UltiSnips 源码的同时又进行了部分改动。</p>
</div>
<p>以上的快捷键需要 <kbd>Ctrl</kbd> + <kbd>CapsLock</kbd> 才能展开 snippet，终究还是不爽。于是希望 <kbd>CapsLock</kbd> 能同时起到展开和跳转的功能，在歧义时优先展开，但为了歧义时也能正常跳转，我还为 <kbd>Ctrl</kbd> + <kbd>CapsLock</kbd> 单独映射了跳转的功能，如下：</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">g:UltiSnipsExpandTrigger</span>      = <span class="string">&quot;&lt;A-F12&gt;&quot;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:UltiSnipsJumpForwardTrigger</span> = <span class="string">&quot;&lt;A-F12&gt;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">inoremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;C-A-F12&gt;</span> <span class="symbol">&lt;C-r&gt;</span>=UltiSnips#JumpForwards()<span class="symbol">&lt;Cr&gt;</span></span><br><span class="line"><span class="keyword">snoremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;C-A-F12&gt;</span> <span class="symbol">&lt;Esc&gt;</span>:<span class="keyword">call</span> UltiSnips#JumpForwards()<span class="symbol">&lt;Cr&gt;</span></span><br></pre></td></tr></table></figure>
<p>但实际体验中我发现，我觉得优先考虑跳转似乎会好一点。不过 UltiSnips 并不支持，于是我依葫芦画瓢魔改了一下源码并提交了一个 PR(<a target="_blank" rel="noopener" href="https://github.com/SirVer/ultisnips/pull/1542">Add JumpOrExpand support</a>)，目前还未合并。</p>
<p>按照我的 PR，只需要改为下面就好了：</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">g:UltiSnipsJumpOrExpandTrigger</span> = <span class="string">&quot;&lt;A-F12&gt;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">inoremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;C-A-F12&gt;</span> <span class="symbol">&lt;C-r&gt;</span>=UltiSnips#ExpandSnippet()<span class="symbol">&lt;Cr&gt;</span></span><br><span class="line"><span class="keyword">snoremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;C-A-F12&gt;</span> <span class="symbol">&lt;Esc&gt;</span>:<span class="keyword">call</span> UltiSnips#ExpandSnippet()<span class="symbol">&lt;Cr&gt;</span></span><br></pre></td></tr></table></figure>
<p>但我发现这样一来，就无法使用 Tabout 了。即使按文档中三元表达式方法，我也没能成功（因为没两个 Trigger 它就原样映射了，我也懒得加判断了）。于是我就再魔改了一下（当然没提交到 PR，纯粹自用），把映射 <code>i</code> <code>s</code> 的部分禁用了：</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function!</span> <span class="title">UltiSnips</span>#map_keys#MapKeys<span class="params">()</span> abort</span><br><span class="line">    <span class="keyword">if</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">exists</span>(<span class="string">&quot;g:UltiSnipsExpandOrJumpTrigger&quot;</span>)</span><br><span class="line">            exec <span class="string">&quot;inoremap &lt;silent&gt; &quot;</span> . <span class="variable">g:UltiSnipsExpandOrJumpTrigger</span> . <span class="string">&quot; &lt;C-R&gt;=UltiSnips#ExpandSnippetOrJump()&lt;cr&gt;&quot;</span></span><br><span class="line">            exec <span class="string">&quot;snoremap &lt;silent&gt; &quot;</span> . <span class="variable">g:UltiSnipsExpandOrJumpTrigger</span> . <span class="string">&quot; &lt;Esc&gt;:call UltiSnips#ExpandSnippetOrJump()&lt;cr&gt;&quot;</span></span><br><span class="line">        <span class="keyword">elseif</span> <span class="built_in">exists</span>(<span class="string">&quot;g:UltiSnipsJumpOrExpandTrigger&quot;</span>)</span><br><span class="line">            exec <span class="string">&quot;inoremap &lt;silent&gt; &quot;</span> . <span class="variable">g:UltiSnipsJumpOrExpandTrigger</span> . <span class="string">&quot; &lt;C-R&gt;=UltiSnips#JumpOrExpandSnippet()&lt;cr&gt;&quot;</span></span><br><span class="line">            exec <span class="string">&quot;snoremap &lt;silent&gt; &quot;</span> . <span class="variable">g:UltiSnipsJumpOrExpandTrigger</span> . <span class="string">&quot; &lt;Esc&gt;:call UltiSnips#JumpOrExpandSnippet()&lt;cr&gt;&quot;</span></span><br><span class="line">        <span class="keyword">elseif</span> <span class="variable">g:UltiSnipsExpandTrigger</span> == <span class="variable">g:UltiSnipsJumpForwardTrigger</span></span><br><span class="line">            exec <span class="string">&quot;inoremap &lt;silent&gt; &quot;</span> . <span class="variable">g:UltiSnipsExpandTrigger</span> . <span class="string">&quot; &lt;C-R&gt;=UltiSnips#ExpandSnippetOrJump()&lt;cr&gt;&quot;</span></span><br><span class="line">            exec <span class="string">&quot;snoremap &lt;silent&gt; &quot;</span> . <span class="variable">g:UltiSnipsExpandTrigger</span> . <span class="string">&quot; &lt;Esc&gt;:call UltiSnips#ExpandSnippetOrJump()&lt;cr&gt;&quot;</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            exec <span class="string">&quot;inoremap &lt;silent&gt; &quot;</span> . <span class="variable">g:UltiSnipsExpandTrigger</span> . <span class="string">&quot; &lt;C-R&gt;=UltiSnips#ExpandSnippet()&lt;cr&gt;&quot;</span></span><br><span class="line">            exec <span class="string">&quot;snoremap &lt;silent&gt; &quot;</span> . <span class="variable">g:UltiSnipsExpandTrigger</span> . <span class="string">&quot; &lt;Esc&gt;:call UltiSnips#ExpandSnippet()&lt;cr&gt;&quot;</span></span><br><span class="line">        <span class="keyword">endif</span></span><br><span class="line">    <span class="keyword">endif</span></span><br><span class="line">    exec <span class="string">&quot;xnoremap &lt;silent&gt; &quot;</span> . <span class="variable">g:UltiSnipsExpandTrigger</span>. <span class="string">&quot; :call UltiSnips#SaveLastVisualSelection()&lt;cr&gt;gvs&quot;</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(<span class="variable">g:UltiSnipsListSnippets</span>) &gt; <span class="number">0</span></span><br><span class="line">       exec <span class="string">&quot;inoremap &lt;silent&gt; &quot;</span> . <span class="variable">g:UltiSnipsListSnippets</span> . <span class="string">&quot; &lt;C-R&gt;=UltiSnips#ListSnippets()&lt;cr&gt;&quot;</span></span><br><span class="line">       exec <span class="string">&quot;snoremap &lt;silent&gt; &quot;</span> . <span class="variable">g:UltiSnipsListSnippets</span> . <span class="string">&quot; &lt;Esc&gt;:call UltiSnips#ListSnippets()&lt;cr&gt;&quot;</span></span><br><span class="line">    <span class="keyword">endif</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">snoremap</span> <span class="symbol">&lt;silent&gt;</span> <span class="symbol">&lt;BS&gt;</span> <span class="symbol">&lt;c-g&gt;</span><span class="comment">&quot;_c</span></span><br><span class="line">    <span class="keyword">snoremap</span> <span class="symbol">&lt;silent&gt;</span> <span class="symbol">&lt;DEL&gt;</span> <span class="symbol">&lt;c-g&gt;</span><span class="comment">&quot;_c</span></span><br><span class="line">    <span class="keyword">snoremap</span> <span class="symbol">&lt;silent&gt;</span> <span class="symbol">&lt;c-h&gt;</span> <span class="symbol">&lt;c-g&gt;</span><span class="comment">&quot;_c</span></span><br><span class="line">    <span class="keyword">snoremap</span> <span class="symbol">&lt;c-r&gt;</span> <span class="symbol">&lt;c-g&gt;</span><span class="comment">&quot;_c&lt;c-r&gt;</span></span><br><span class="line"><span class="keyword">endf</span></span><br></pre></td></tr></table></figure>
<p>然后配置文件改为如下（相同部分略）：</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">g:ulti_expand_or_jump_res</span> = <span class="number">0</span></span><br><span class="line"><span class="keyword">function!</span> <span class="title">Ulti_JumpOrExpand_and_getRes</span><span class="params">()</span></span><br><span class="line">  <span class="keyword">call</span> UltiSnips#JumpOrExpandSnippet()</span><br><span class="line">  <span class="keyword">return</span> <span class="variable">g:ulti_expand_or_jump_res</span></span><br><span class="line"><span class="keyword">endfunction</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:UltiSnipsExpandTrigger</span> = <span class="string">&quot;&lt;A-F12&gt;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">inoremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;A-F12&gt;</span>   <span class="symbol">&lt;C-r&gt;</span>=(Ulti_JumpOrExpand_and_getRes() &gt; <span class="number">0</span>) ? <span class="string">&quot;&quot;</span> : IncreaseColNumber()<span class="symbol">&lt;Cr&gt;</span></span><br><span class="line"><span class="keyword">snoremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;A-F12&gt;</span>   <span class="symbol">&lt;Esc&gt;</span>:exec (Ulti_JumpOrExpand_and_getRes() &gt; <span class="number">0</span>) ? <span class="string">&quot;&quot;</span> : IncreaseColNumber()<span class="symbol">&lt;Cr&gt;</span></span><br><span class="line"><span class="keyword">inoremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;C-A-F12&gt;</span> <span class="symbol">&lt;C-r&gt;</span>=UltiSnips#ExpandSnippet()<span class="symbol">&lt;Cr&gt;</span></span><br><span class="line"><span class="keyword">snoremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;C-A-F12&gt;</span> <span class="symbol">&lt;Esc&gt;</span>:<span class="keyword">call</span> UltiSnips#ExpandSnippet()<span class="symbol">&lt;Cr&gt;</span></span><br></pre></td></tr></table></figure>
<p>最后删掉之前的一行映射即可：</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line"><span class="keyword">inoremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;A-F12&gt;</span> <span class="symbol">&lt;C-r&gt;</span>=IncreaseColNumber()<span class="symbol">&lt;Cr&gt;</span></span><br></pre></td></tr></table></figure>
<p>同时我还把 <code>snippet_manager.py</code> 相关的 <code>_handle_failure()</code> 注释了，原因和一个 issue(<a target="_blank" rel="noopener" href="https://github.com/SirVer/ultisnips/issues/1523">if expand fails, the trigger key is inserted</a>) 一样。</p>
<h3 id="easymotion">easymotion<a class="header-anchor" href="#easymotion"></a></h3>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">g:EasyMotion_enter_jump_first</span> = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;leader&gt;</span><span class="keyword">j</span>         <span class="symbol">&lt;Plug&gt;</span>(easymotion-<span class="keyword">j</span>)</span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;leader&gt;</span><span class="keyword">k</span>         <span class="symbol">&lt;Plug&gt;</span>(easymotion-<span class="keyword">k</span>)</span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;leader&gt;</span>h         <span class="symbol">&lt;Plug&gt;</span>(easymotion-linebackward)</span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;leader&gt;</span><span class="keyword">l</span>         <span class="symbol">&lt;Plug&gt;</span>(easymotion-lineforward)</span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;leader&gt;</span>.         <span class="symbol">&lt;Plug&gt;</span>(easymotion-<span class="built_in">repeat</span>)</span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;leader&gt;</span><span class="keyword">f</span>         <span class="symbol">&lt;Plug&gt;</span>(easymotion-<span class="keyword">f</span>)</span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;leader&gt;</span>F         <span class="symbol">&lt;Plug&gt;</span>(easymotion-F)</span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;leader&gt;</span>t         <span class="symbol">&lt;Plug&gt;</span>(easymotion-t)</span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;leader&gt;</span>T         <span class="symbol">&lt;Plug&gt;</span>(easymotion-T)</span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;leader&gt;</span><span class="symbol">&lt;leader&gt;</span><span class="keyword">f</span> <span class="symbol">&lt;Plug&gt;</span>(easymotion-f2)</span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;leader&gt;</span><span class="symbol">&lt;leader&gt;</span>F <span class="symbol">&lt;Plug&gt;</span>(easymotion-F2)</span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;leader&gt;</span><span class="symbol">&lt;leader&gt;</span>t <span class="symbol">&lt;Plug&gt;</span>(easymotion-t2)</span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;leader&gt;</span><span class="symbol">&lt;leader&gt;</span>T <span class="symbol">&lt;Plug&gt;</span>(easymotion-T2)</span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;leader&gt;</span>s         <span class="symbol">&lt;Plug&gt;</span>(easymotion-s)</span><br><span class="line"><span class="keyword">nnoremap</span> s                 <span class="symbol">&lt;Plug&gt;</span>(easymotion-s2)</span><br><span class="line"><span class="keyword">nnoremap</span> /                 <span class="symbol">&lt;Plug&gt;</span>(easymotion-<span class="keyword">sn</span>)\v</span><br><span class="line"><span class="keyword">onoremap</span> /                 <span class="symbol">&lt;Plug&gt;</span>(easymotion-<span class="keyword">tn</span>)\v</span><br><span class="line"><span class="keyword">nnoremap</span> n                 <span class="symbol">&lt;Plug&gt;</span>(easymotion-<span class="keyword">next</span>)</span><br><span class="line"><span class="keyword">nnoremap</span> <span class="keyword">N</span>                 <span class="symbol">&lt;Plug&gt;</span>(easymotion-<span class="keyword">prev</span>)</span><br></pre></td></tr></table></figure>
<p>基本上就是 <kbd>Space</kbd> 加操作符 <code>hjklfFtTs</code> 进行对应跳转。除了单独一个 <kbd>s</kbd>，因为不常用额外配置了。然后用其搜索替换了自带正向搜索。</p>
<h3 id="vim-visual-multi">vim-visual-multi<a class="header-anchor" href="#vim-visual-multi"></a></h3>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">g:VM_theme</span> = <span class="string">&#x27;iceblue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:VM_maps</span>                    = &#123;&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:VM_maps</span>[<span class="string">&quot;Exit&quot;</span>]            = <span class="string">&#x27;&lt;C-c&gt;&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:VM_maps</span>[<span class="string">&quot;Add Cursor Down&quot;</span>] = <span class="string">&#x27;&lt;A-s&gt;&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:VM_maps</span>[<span class="string">&quot;Add Cursor Up&quot;</span>]   = <span class="string">&#x27;&lt;A-w&gt;&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:VM_maps</span>[<span class="string">&quot;Select l&quot;</span>]        = <span class="string">&#x27;&lt;A-d&gt;&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:VM_maps</span>[<span class="string">&quot;Select h&quot;</span>]        = <span class="string">&#x27;&lt;A-a&gt;&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:VM_maps</span>[<span class="string">&quot;Move Left&quot;</span>]       = <span class="string">&#x27;&lt;A-S-a&gt;&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:VM_maps</span>[<span class="string">&quot;Move Right&quot;</span>]      = <span class="string">&#x27;&lt;A-S-d&gt;&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:VM_maps</span>[<span class="string">&quot;Undo&quot;</span>]            = <span class="string">&#x27;u&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:VM_maps</span>[<span class="string">&quot;Redo&quot;</span>]            = <span class="string">&#x27;U&#x27;</span></span><br></pre></td></tr></table></figure>
<p>这些键击还是比较好理解的。<kbd>Ctrl</kbd> + <kbd>C</kbd> 本身就常作为退出键；<kbd>WASD</kbd> 也算是移动的经典按键。</p>
<h3 id="LeaderF">LeaderF<a class="header-anchor" href="#LeaderF"></a></h3>
<p>这也是经典抄配置的例子了。应该来自<a target="_blank" rel="noopener" href="https://retzzz.github.io/dc9af5aa/">这篇博文</a>。</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">g:Lf_WorkingDirectoryMode</span> = <span class="string">&#x27;AF&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:Lf_RootMarkers</span>          = [<span class="string">&#x27;.git&#x27;</span>, <span class="string">&#x27;.root&#x27;</span>]</span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:Lf_DefaultExternalTool</span>  = <span class="string">&#x27;rg&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:Lf_PreviewResult</span>        = &#123;</span><br><span class="line">            \ <span class="string">&#x27;File&#x27;</span>        : <span class="number">0</span>,</span><br><span class="line">            \ <span class="string">&#x27;Buffer&#x27;</span>      : <span class="number">0</span>,</span><br><span class="line">            \ <span class="string">&#x27;Mru&#x27;</span>         : <span class="number">0</span>,</span><br><span class="line">            \ <span class="string">&#x27;Tag&#x27;</span>         : <span class="number">0</span>,</span><br><span class="line">            \ <span class="string">&#x27;BufTag&#x27;</span>      : <span class="number">1</span>,</span><br><span class="line">            \ <span class="string">&#x27;Function&#x27;</span>    : <span class="number">1</span>,</span><br><span class="line">            \ <span class="string">&#x27;Line&#x27;</span>        : <span class="number">0</span>,</span><br><span class="line">            \ <span class="string">&#x27;Colorscheme&#x27;</span> : <span class="number">0</span>,</span><br><span class="line">            \ <span class="string">&#x27;Rg&#x27;</span>          : <span class="number">1</span>,</span><br><span class="line">            \ <span class="string">&#x27;Gtags&#x27;</span>       : <span class="number">0</span></span><br><span class="line">            \&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:Lf_StlColorscheme</span>   = <span class="string">&#x27;gruvbox_material&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:Lf_PopupColorscheme</span> = <span class="string">&#x27;gruvbox_material&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:Lf_WindowPosition</span>   = <span class="string">&#x27;popup&#x27;</span> <span class="comment">&quot; Use &lt;leader&gt;pt to switch between &#x27;popup&#x27; &amp; &#x27;bottom&#x27; to avoid &#x27;Replace can not be used in popout window&#x27; issue</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:Lf_PreviewInPopup</span>   = <span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>简而言之前两行配置就是找搜索起点。我设置了存在 <code>.git</code> 和 <code>.root</code> 为根目录。<code>A</code> 表示找前级目录里最近的根目录；<code>F</code> 表示找工作目录，看当前文件是不是在 Vim 工作目录。都匹配不成功以此文件所在目录为起点（即默认的 <code>c</code>）。</p>
<p>然后使用外部工具 <code>ripgrep</code>，即 <code>rg</code>。</p>
<p><code>g:Lf_PreviewResult</code> 应该就是设置了查找 <code>BufTag</code> <code>Function</code> 及 <code>Rg</code> 时自动启用预览。为什么我这样配置我也不清楚。</p>
<p>搜索窗口我选择了 Popup，因为挺好看的。但是呢 Popup 窗口无法使用替换功能。于是我注释里写道使用 <kbd>Space</kbd> + <kbd>P</kbd> + <kbd>T</kbd> 切换 Popup 和 Bottom 显示。具体映射如下</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line"><span class="keyword">noremap</span> <span class="symbol">&lt;expr&gt;</span><span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;leader&gt;</span><span class="keyword">pt</span> <span class="string">&quot;:let g:Lf_WindowPosition = &#x27;&quot;</span> . (<span class="variable">g:Lf_WindowPosition</span> == <span class="string">&quot;popup&quot;</span> ? <span class="string">&quot;bottom&quot;</span> : <span class="string">&quot;popup&quot;</span>) . <span class="string">&quot;&#x27;&lt;Cr&gt;&quot;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">noremap</span> <span class="symbol">&lt;unique&gt;</span><span class="symbol">&lt;leader&gt;</span><span class="keyword">p</span>  <span class="symbol">&lt;Nop&gt;</span></span><br><span class="line"><span class="keyword">noremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;leader&gt;</span><span class="keyword">pp</span> :LeaderfSelf<span class="symbol">&lt;Cr&gt;</span></span><br><span class="line"><span class="keyword">noremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;leader&gt;</span>pl :LeaderfLine<span class="symbol">&lt;Cr&gt;</span></span><br><span class="line"><span class="keyword">noremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;leader&gt;</span>pf :LeaderfFile<span class="symbol">&lt;Cr&gt;</span></span><br><span class="line"><span class="keyword">noremap</span> <span class="symbol">&lt;unique&gt;</span><span class="symbol">&lt;leader&gt;</span>pr <span class="symbol">&lt;Plug&gt;</span>LeaderfRgPrompt</span><br></pre></td></tr></table></figure>
<p><kbd>Space</kbd> + <kbd>P</kbd> 作为前缀按键。<kbd>P</kbd> 代表显示自己，自行选择功能；<kbd>L</kbd> 代表 搜索本文件行；<kbd>F</kbd> 代表查找文件；<kbd>R</kbd> 代表用 Rg 搜索，也是我最常用的，<s>因为其他没记住</s>。说实话映射确实有点少了，不过我觉得映射还是得建立在理解的基础上。</p>
<h3 id="vim-easy-align">vim-easy-align<a class="header-anchor" href="#vim-easy-align"></a></h3>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">nnoremap</span> ga <span class="symbol">&lt;Plug&gt;</span>(EasyAlign)</span><br><span class="line"><span class="keyword">vnoremap</span> ga <span class="symbol">&lt;Plug&gt;</span>(EasyAlign)</span><br><span class="line"></span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;silent&gt;</span>g:             <span class="symbol">&lt;Plug&gt;</span>(EasyAlign)ip*<span class="symbol">&lt;C-l&gt;</span><span class="number">0</span><span class="symbol">&lt;Cr&gt;</span><span class="symbol">&lt;C-x&gt;</span>\\\@&lt;!:\(=\)\@!<span class="symbol">&lt;Cr&gt;</span></span><br><span class="line"><span class="keyword">vnoremap</span> <span class="symbol">&lt;silent&gt;</span>g:             <span class="symbol">&lt;Plug&gt;</span>(EasyAlign)*<span class="symbol">&lt;C-l&gt;</span><span class="number">0</span><span class="symbol">&lt;Cr&gt;</span><span class="symbol">&lt;C-x&gt;</span>\\\@&lt;!:\(=\)\@!<span class="symbol">&lt;Cr&gt;</span></span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;silent&gt;</span>g=             <span class="symbol">&lt;Plug&gt;</span>(EasyAlign)ip=<span class="symbol">&lt;Cr&gt;</span></span><br><span class="line"><span class="keyword">vnoremap</span> <span class="symbol">&lt;silent&gt;</span>g=             <span class="symbol">&lt;Plug&gt;</span>(EasyAlign)*=<span class="symbol">&lt;Cr&gt;</span></span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;expr&gt;</span>g<span class="symbol">&lt;Space&gt;</span> <span class="string">&#x27;&lt;C-u&gt;&lt;Plug&gt;(EasyAlign)ip&#x27;</span> . <span class="variable">v:count1</span> . <span class="string">&#x27; \&lt;Cr&gt;&#x27;</span></span><br><span class="line"><span class="keyword">vnoremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;expr&gt;</span>g<span class="symbol">&lt;Space&gt;</span> <span class="string">&#x27;&lt;Plug&gt;(EasyAlign)&#x27;</span> . <span class="variable">v:count1</span> . <span class="string">&#x27; \&lt;Cr&gt;&#x27;</span></span><br></pre></td></tr></table></figure>
<p><kbd>ga</kbd> 是基础键。剩下的是我配置的常用键。</p>
<p>例如 <kbd>g:</kbd> 用来对齐合理英文冒号（指前面没有 <code>\</code> 与后面没有 <code>=</code>，主要是避免 <code>:=</code> 被拆分，但是呢 <code>\\:</code> 也不行）。结果是对齐后冒号左边无间隔，右边有间隔，即 <code>xxx: xxx</code> 型。</p>
<p>再比如<kbd>g=</kbd> 就是对齐等号。</p>
<p>然后 <kbd>g&lt;Space&gt;</kbd> 就是对齐空格，这个还支持选择对齐第几个空格。<code>v:count1</code> 用法也是摸索出来的，<s>虽然现在已经忘却了</s>。算是我的一个得意之作。</p>
<h3 id="ale">ale<a class="header-anchor" href="#ale"></a></h3>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">g:ale_sign_error</span>   = <span class="string">&#x27;&gt;&gt;&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:ale_sign_warning</span> = <span class="string">&#x27;--&#x27;</span></span><br></pre></td></tr></table></figure>
<p>寒酸的配置。似乎没用到过，AutoHotkey 没见过，Python 有 Python Mode，也许是 JS 和 C 会有？</p>
<h3 id="coc">coc<a class="header-anchor" href="#coc"></a></h3>
<p>真正重头戏。配置近 200 行。我的配置与 GitHub 上示例已经大有不同了，我也就边写边改。</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">g:coc_data_home</span> = $USERPROFILE . <span class="string">&#x27;/vimfiles/extra/coc&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:coc_global_extensions</span> = [</span><br><span class="line">        \ <span class="string">&#x27;coc-json&#x27;</span>,</span><br><span class="line">        \ <span class="string">&#x27;coc-css&#x27;</span>,</span><br><span class="line">        \ <span class="string">&#x27;coc-html&#x27;</span>,</span><br><span class="line">        \ <span class="string">&#x27;coc-webview&#x27;</span>,</span><br><span class="line">        \ <span class="string">&#x27;coc-markdown-preview-enhanced&#x27;</span>,</span><br><span class="line">        \ <span class="string">&#x27;coc-git&#x27;</span>,</span><br><span class="line">        \ <span class="string">&#x27;coc-highlight&#x27;</span>,</span><br><span class="line">        \ <span class="string">&#x27;coc-pyright&#x27;</span>,</span><br><span class="line">        \ <span class="string">&#x27;coc-snippets&#x27;</span>,</span><br><span class="line">        \ <span class="string">&#x27;coc-ltex&#x27;</span>,</span><br><span class="line">        \ <span class="string">&#x27;coc-pairs&#x27;</span>,</span><br><span class="line">        \ <span class="string">&#x27;coc-tsserver&#x27;</span>,</span><br><span class="line">        \ <span class="string">&#x27;coc-vimlsp&#x27;</span>,</span><br><span class="line">        \ <span class="string">&#x27;coc-lists&#x27;</span>,</span><br><span class="line">        \ <span class="string">&#x27;coc-vimtex&#x27;</span>,</span><br><span class="line">        \]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:coc_snippet_next</span> = <span class="string">&#x27;&lt;Tab&gt;&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:coc_snippet_prev</span> = <span class="string">&#x27;&lt;S-Tab&gt;&#x27;</span></span><br></pre></td></tr></table></figure>
<p>设置 coc 存储目录，比较好整合。然后是一堆额外插件，就不额外介绍了。</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&quot; Some servers have issues with backup files, see #649.</span></span><br><span class="line"><span class="keyword">set</span> nobackup</span><br><span class="line"><span class="keyword">set</span> nowritebackup</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; Having longer updatetime (default is 4000 ms = 4 s) leads to noticeable</span></span><br><span class="line"><span class="comment">&quot; delays and poor user experience.</span></span><br><span class="line"><span class="keyword">set</span> updatetime=<span class="number">300</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; Always show the signcolumn, otherwise it would shift the text each time</span></span><br><span class="line"><span class="comment">&quot; diagnostics appear/become resolved.</span></span><br><span class="line"><span class="keyword">set</span> signcolumn=yes</span><br></pre></td></tr></table></figure>
<p>照做，改。</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&quot; Use tab for trigger completion with characters ahead and navigate.</span></span><br><span class="line"><span class="comment">&quot; <span class="doctag">NOTE:</span> Use command &#x27;:verbose imap &lt;tab&gt;&#x27; to make sure tab is not mapped by</span></span><br><span class="line"><span class="comment">&quot; other plugin before putting this into your config.</span></span><br><span class="line"><span class="keyword">inoremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;expr&gt;</span> <span class="symbol">&lt;C-z&gt;</span></span><br><span class="line">      \ coc#pum#visible() ? coc#pum#next(<span class="number">1</span>):</span><br><span class="line">      \ CheckBackspace() ? <span class="string">&quot;\&lt;C-z&gt;&quot;</span> :</span><br><span class="line">      \ coc#refresh()</span><br><span class="line"><span class="keyword">inoremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;expr&gt;</span><span class="symbol">&lt;C-S-z&gt;</span> coc#pum#visible() ? coc#pum#prev(<span class="number">1</span>) : <span class="string">&quot;\&lt;C-h&gt;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; Make &lt;CR&gt; to accept selected completion item or notify coc.nvim to format</span></span><br><span class="line"><span class="comment">&quot; &lt;C-g&gt;u breaks current undo, please make your own choice.</span></span><br><span class="line"><span class="keyword">inoremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;expr&gt;</span> <span class="symbol">&lt;C-c&gt;</span> coc#pum#visible() ? coc#pum#confirm()</span><br><span class="line">                              \: <span class="string">&quot;\&lt;C-g&gt;u\&lt;CR&gt;\&lt;c-r&gt;=coc#on_enter()\&lt;CR&gt;&quot;</span></span><br></pre></td></tr></table></figure>
<p>更改快捷键：选择改为 <kbd>Ctrl</kbd> + <kbd>Z</kbd>，触发改为 <kbd>Ctrl</kbd> + <kbd>C</kbd>。</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function!</span> <span class="title">CheckBackspace</span><span class="params">()</span> abort</span><br><span class="line">  <span class="keyword">let</span> <span class="keyword">col</span> = <span class="keyword">col</span>(<span class="string">&#x27;.&#x27;</span>) - <span class="number">1</span></span><br><span class="line">  <span class="keyword">return</span> !col || <span class="built_in">getline</span>(<span class="string">&#x27;.&#x27;</span>)[<span class="keyword">col</span> - <span class="number">1</span>]  =~# <span class="string">&#x27;\s&#x27;</span></span><br><span class="line"><span class="keyword">endfunction</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; Use &lt;c-space&gt; to trigger completion.</span></span><br><span class="line"><span class="keyword">inoremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;expr&gt;</span> &lt;<span class="keyword">c</span>-@&gt; coc#refresh()</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; Use `[g` and `]g` to navigate diagnostics</span></span><br><span class="line"><span class="comment">&quot; Use `:CocDiagnostics` to get all diagnostics of current buffer in location list.</span></span><br><span class="line"><span class="keyword">nmap</span> <span class="symbol">&lt;silent&gt;</span> [g <span class="symbol">&lt;Plug&gt;</span>(coc-diagnostic-<span class="keyword">prev</span>)</span><br><span class="line"><span class="keyword">nmap</span> <span class="symbol">&lt;silent&gt;</span> ]g <span class="symbol">&lt;Plug&gt;</span>(coc-diagnostic-<span class="keyword">next</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; GoTo code navigation.</span></span><br><span class="line"><span class="keyword">nmap</span> <span class="symbol">&lt;silent&gt;</span> gd <span class="symbol">&lt;Plug&gt;</span>(coc-definition)</span><br><span class="line"><span class="keyword">nmap</span> <span class="symbol">&lt;silent&gt;</span> gy <span class="symbol">&lt;Plug&gt;</span>(coc-<span class="built_in">type</span>-definition)</span><br><span class="line"><span class="keyword">nmap</span> <span class="symbol">&lt;silent&gt;</span> gi <span class="symbol">&lt;Plug&gt;</span>(coc-implementation)</span><br><span class="line"><span class="keyword">nmap</span> <span class="symbol">&lt;silent&gt;</span> <span class="keyword">gr</span> <span class="symbol">&lt;Plug&gt;</span>(coc-references)</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; Use K to show documentation in preview window.</span></span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;silent&gt;</span> K :<span class="keyword">call</span> ShowDocumentation()<span class="symbol">&lt;CR&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function!</span> <span class="title">ShowDocumentation</span><span class="params">()</span></span><br><span class="line">  <span class="keyword">if</span> CocAction(<span class="string">&#x27;hasProvider&#x27;</span>, <span class="string">&#x27;hover&#x27;</span>)</span><br><span class="line">    <span class="keyword">call</span> CocActionAsync(<span class="string">&#x27;doHover&#x27;</span>)</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    <span class="keyword">call</span> <span class="built_in">feedkeys</span>(<span class="string">&#x27;K&#x27;</span>, <span class="string">&#x27;in&#x27;</span>)</span><br><span class="line">  <span class="keyword">endif</span></span><br><span class="line"><span class="keyword">endfunction</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; Highlight the symbol and its references when holding the cursor.</span></span><br><span class="line"><span class="keyword">autocmd</span> CursorHold * <span class="keyword">silent</span> <span class="keyword">call</span> CocActionAsync(<span class="string">&#x27;highlight&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; Symbol renaming.</span></span><br><span class="line"><span class="keyword">nmap</span> <span class="symbol">&lt;leader&gt;</span>rn <span class="symbol">&lt;Plug&gt;</span>(coc-<span class="built_in">rename</span>)</span><br></pre></td></tr></table></figure>
<p>都是没怎么用过的功能。真是暴殄天物。基本没动，把 <code>nvim</code> 的判断删了。</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&quot; Formatting selected code.</span></span><br><span class="line"><span class="keyword">xmap</span> <span class="symbol">&lt;leader&gt;</span><span class="keyword">f</span>  <span class="symbol">&lt;Plug&gt;</span>(coc-format-selected)</span><br><span class="line"><span class="keyword">nmap</span> <span class="symbol">&lt;leader&gt;</span><span class="keyword">f</span>  <span class="symbol">&lt;Plug&gt;</span>(coc-format-selected)</span><br><span class="line"></span><br><span class="line"><span class="keyword">augroup</span> mygroup</span><br><span class="line">  autocmd!</span><br><span class="line">  <span class="comment">&quot; Setup formatexpr specified filetype(s).</span></span><br><span class="line">  <span class="keyword">autocmd</span> FileType typescript,json <span class="keyword">setl</span> formatexpr=CocAction(<span class="string">&#x27;formatSelected&#x27;</span>)</span><br><span class="line">  <span class="comment">&quot; Update signature help on jump placeholder.</span></span><br><span class="line">  <span class="keyword">autocmd</span> User CocJumpPlaceholder <span class="keyword">call</span> CocActionAsync(<span class="string">&#x27;showSignatureHelp&#x27;</span>)</span><br><span class="line"><span class="keyword">augroup</span> end</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; Applying code actions to the selected code block</span></span><br><span class="line"><span class="comment">&quot; Example: `&lt;leader&gt;aap` for current paragraph</span></span><br><span class="line"><span class="comment">&quot; xmap &lt;leader&gt;a  &lt;Plug&gt;(coc-codeaction-selected)</span></span><br><span class="line"><span class="comment">&quot; nmap &lt;leader&gt;a  &lt;Plug&gt;(coc-codeaction-selected)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; Remap keys for applying code actions at the cursor position</span></span><br><span class="line"><span class="keyword">nmap</span> <span class="symbol">&lt;leader&gt;</span>ac  <span class="symbol">&lt;Plug&gt;</span>(coc-codeaction-<span class="built_in">cursor</span>)</span><br><span class="line"><span class="comment">&quot; Remap keys for apply code actions affect whole buffer</span></span><br><span class="line"><span class="keyword">nmap</span> <span class="symbol">&lt;leader&gt;</span><span class="keyword">as</span>  <span class="symbol">&lt;Plug&gt;</span>(coc-codeaction-<span class="keyword">source</span>)</span><br><span class="line"><span class="comment">&quot; Apply the most preferred quickfix action to fix diagnostic on the current line</span></span><br><span class="line"><span class="comment">&quot; nmap &lt;leader&gt;qf  &lt;Plug&gt;(coc-fix-current)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; Remap keys for applying refactor code actions</span></span><br><span class="line"><span class="keyword">nmap</span> <span class="symbol">&lt;silent&gt;</span> <span class="symbol">&lt;leader&gt;</span>re <span class="symbol">&lt;Plug&gt;</span>(coc-codeaction-refactor)</span><br><span class="line"><span class="keyword">xmap</span> <span class="symbol">&lt;silent&gt;</span> <span class="symbol">&lt;leader&gt;</span>r  <span class="symbol">&lt;Plug&gt;</span>(coc-codeaction-refactor-selected)</span><br><span class="line"><span class="keyword">nmap</span> <span class="symbol">&lt;silent&gt;</span> <span class="symbol">&lt;leader&gt;</span>r  <span class="symbol">&lt;Plug&gt;</span>(coc-codeaction-refactor-selected)</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; Run the Code Lens action on the current line.</span></span><br><span class="line"><span class="comment">&quot; nmap &lt;leader&gt;cl  &lt;Plug&gt;(coc-codelens-action)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; Map function and class text objects</span></span><br><span class="line"><span class="comment">&quot; <span class="doctag">NOTE:</span> Requires &#x27;textDocument.documentSymbol&#x27; support from the language server.</span></span><br><span class="line"><span class="keyword">xmap</span> <span class="keyword">if</span> <span class="symbol">&lt;Plug&gt;</span>(coc-funcobj-i)</span><br><span class="line"><span class="keyword">omap</span> <span class="keyword">if</span> <span class="symbol">&lt;Plug&gt;</span>(coc-funcobj-i)</span><br><span class="line"><span class="keyword">xmap</span> af <span class="symbol">&lt;Plug&gt;</span>(coc-funcobj-<span class="keyword">a</span>)</span><br><span class="line"><span class="keyword">omap</span> af <span class="symbol">&lt;Plug&gt;</span>(coc-funcobj-<span class="keyword">a</span>)</span><br><span class="line"><span class="keyword">xmap</span> ic <span class="symbol">&lt;Plug&gt;</span>(coc-classobj-i)</span><br><span class="line"><span class="keyword">omap</span> ic <span class="symbol">&lt;Plug&gt;</span>(coc-classobj-i)</span><br><span class="line"><span class="keyword">xmap</span> ac <span class="symbol">&lt;Plug&gt;</span>(coc-classobj-<span class="keyword">a</span>)</span><br><span class="line"><span class="keyword">omap</span> ac <span class="symbol">&lt;Plug&gt;</span>(coc-classobj-<span class="keyword">a</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; Remap &lt;C-f&gt; and &lt;C-b&gt; for scroll float windows/popups.</span></span><br><span class="line"><span class="string">&quot; nnoremap &lt;silent&gt;&lt;nowait&gt;&lt;expr&gt; &lt;C-f&gt; coc#float#has_scroll() ? coc#float#scroll(1) : &quot;</span>\<span class="symbol">&lt;C-f&gt;</span><span class="comment">&quot;</span></span><br><span class="line"><span class="string">&quot; nnoremap &lt;silent&gt;&lt;nowait&gt;&lt;expr&gt; &lt;C-b&gt; coc#float#has_scroll() ? coc#float#scroll(0) : &quot;</span>\<span class="symbol">&lt;C-b&gt;</span><span class="comment">&quot;</span></span><br><span class="line"><span class="keyword">inoremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;nowait&gt;</span><span class="symbol">&lt;expr&gt;</span> <span class="symbol">&lt;C-f&gt;</span> coc#float#has_scroll() ? <span class="string">&quot;\&lt;C-r&gt;=coc#float#scroll(1)\&lt;Cr&gt;&quot;</span> : <span class="string">&quot;\&lt;Right&gt;&quot;</span></span><br><span class="line"><span class="keyword">inoremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;nowait&gt;</span><span class="symbol">&lt;expr&gt;</span> <span class="symbol">&lt;C-b&gt;</span> coc#float#has_scroll() ? <span class="string">&quot;\&lt;C-r&gt;=coc#float#scroll(0)\&lt;Cr&gt;&quot;</span> : <span class="string">&quot;\&lt;Left&gt;&quot;</span></span><br><span class="line"><span class="keyword">vnoremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;nowait&gt;</span><span class="symbol">&lt;expr&gt;</span> <span class="symbol">&lt;C-f&gt;</span> coc#float#has_scroll() ? coc#float#scroll(<span class="number">1</span>) : <span class="string">&quot;\&lt;C-f&gt;&quot;</span></span><br><span class="line"><span class="keyword">vnoremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;nowait&gt;</span><span class="symbol">&lt;expr&gt;</span> <span class="symbol">&lt;C-b&gt;</span> coc#float#has_scroll() ? coc#float#scroll(<span class="number">0</span>) : <span class="string">&quot;\&lt;C-b&gt;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; Use CTRL-S for selections ranges.</span></span><br><span class="line"><span class="comment">&quot; Requires &#x27;textDocument/selectionRange&#x27; support of language server.</span></span><br><span class="line"><span class="comment">&quot; nmap &lt;silent&gt; &lt;C-s&gt; &lt;Plug&gt;(coc-range-select)</span></span><br><span class="line"><span class="comment">&quot; xmap &lt;silent&gt; &lt;C-s&gt; &lt;Plug&gt;(coc-range-select)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; Add `:Format` command to format current buffer.</span></span><br><span class="line">command! -nargs=<span class="number">0</span> Format :<span class="keyword">call</span> CocActionAsync(<span class="string">&#x27;format&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; Add `:Fold` command to fold current buffer.</span></span><br><span class="line">command! -nargs=? Fold :<span class="keyword">call</span>     CocAction(<span class="string">&#x27;fold&#x27;</span>, <span class="symbol">&lt;f-args&gt;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; Add `:OR` command for organize imports of the current buffer.</span></span><br><span class="line">command! -nargs=<span class="number">0</span> OR   :<span class="keyword">call</span>     CocActionAsync(<span class="string">&#x27;runCommand&#x27;</span>, <span class="string">&#x27;editor.action.organizeImport&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; Add (Neo)Vim&#x27;s native statusline support.</span></span><br><span class="line"><span class="comment">&quot; <span class="doctag">NOTE:</span> Please see `:h coc-status` for integrations with external plugins that</span></span><br><span class="line"><span class="comment">&quot; provide custom statusline: lightline.vim, vim-airline.</span></span><br><span class="line"><span class="comment">&quot; set statusline^=%&#123;coc#status()&#125;%&#123;get(b:,&#x27;coc_current_function&#x27;,&#x27;&#x27;)&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; Mappings for CoCList</span></span><br><span class="line"><span class="comment">&quot; Show all diagnostics.</span></span><br><span class="line"><span class="comment">&quot; nnoremap &lt;silent&gt;&lt;nowait&gt; &lt;space&gt;a  :&lt;C-u&gt;CocList diagnostics&lt;cr&gt;</span></span><br><span class="line"><span class="comment">&quot; Manage extensions.</span></span><br><span class="line"><span class="comment">&quot; nnoremap &lt;silent&gt;&lt;nowait&gt; &lt;space&gt;e  :&lt;C-u&gt;CocList extensions&lt;cr&gt;</span></span><br><span class="line"><span class="comment">&quot; Show commands.</span></span><br><span class="line"><span class="comment">&quot; nnoremap &lt;silent&gt;&lt;nowait&gt; &lt;space&gt;c  :&lt;C-u&gt;CocList commands&lt;cr&gt;</span></span><br><span class="line"><span class="comment">&quot; Find symbol of current document.</span></span><br><span class="line"><span class="comment">&quot; nnoremap &lt;silent&gt;&lt;nowait&gt; &lt;space&gt;o  :&lt;C-u&gt;CocList outline&lt;cr&gt;</span></span><br><span class="line"><span class="comment">&quot; Search workspace symbols.</span></span><br><span class="line"><span class="comment">&quot; nnoremap &lt;silent&gt;&lt;nowait&gt; &lt;space&gt;s  :&lt;C-u&gt;CocList -I symbols&lt;cr&gt;</span></span><br><span class="line"><span class="comment">&quot; Do default action for next item.</span></span><br><span class="line"><span class="comment">&quot; nnoremap &lt;silent&gt;&lt;nowait&gt; &lt;space&gt;j  :&lt;C-u&gt;CocNext&lt;CR&gt;</span></span><br><span class="line"><span class="comment">&quot; Do default action for previous item.</span></span><br><span class="line"><span class="comment">&quot; nnoremap &lt;silent&gt;&lt;nowait&gt; &lt;space&gt;k  :&lt;C-u&gt;CocPrev&lt;CR&gt;</span></span><br><span class="line"><span class="comment">&quot; Resume latest coc list.</span></span><br><span class="line"><span class="comment">&quot; nnoremap &lt;silent&gt;&lt;nowait&gt; &lt;space&gt;p  :&lt;C-u&gt;CocListResume&lt;CR&gt;</span></span><br><span class="line"><span class="comment">&quot; nnoremap &lt;silent&gt;&lt;nowait&gt; &lt;space&gt;l  :&lt;C-u&gt;CocList&lt;CR&gt;</span></span><br></pre></td></tr></table></figure>
<p>剩下的都和文档一致，只是有些因为冲突或种种原因而被注释掉了。</p>
<h3 id="NerdTree">NerdTree<a class="header-anchor" href="#NerdTree"></a></h3>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;silent&gt;</span>T :NERDTree<span class="symbol">&lt;CR&gt;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:NERDTreeWinSize</span>                     = <span class="number">36</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:NERDTreeGitStatusIndicatorMapCustom</span> = &#123;</span><br><span class="line">                \ <span class="string">&#x27;Modified&#x27;</span>  :<span class="string">&#x27;✹&#x27;</span>,</span><br><span class="line">                \ <span class="string">&#x27;Staged&#x27;</span>    :<span class="string">&#x27;✚&#x27;</span>,</span><br><span class="line">                \ <span class="string">&#x27;Untracked&#x27;</span> :<span class="string">&#x27;✭&#x27;</span>,</span><br><span class="line">                \ <span class="string">&#x27;Renamed&#x27;</span>   :<span class="string">&#x27;➜&#x27;</span>,</span><br><span class="line">                \ <span class="string">&#x27;Unmerged&#x27;</span>  :<span class="string">&#x27;═&#x27;</span>,</span><br><span class="line">                \ <span class="string">&#x27;Deleted&#x27;</span>   :<span class="string">&#x27;✖&#x27;</span>,</span><br><span class="line">                \ <span class="string">&#x27;Dirty&#x27;</span>     :<span class="string">&#x27;✗&#x27;</span>,</span><br><span class="line">                \ <span class="string">&#x27;Ignored&#x27;</span>   :<span class="string">&#x27;☒&#x27;</span>,</span><br><span class="line">                \ <span class="string">&#x27;Clean&#x27;</span>     :<span class="string">&#x27;✔︎&#x27;</span>,</span><br><span class="line">                \ <span class="string">&#x27;Unknown&#x27;</span>   :<span class="string">&#x27;?&#x27;</span>,</span><br><span class="line">                \ &#125;</span><br></pre></td></tr></table></figure>
<p>朴实无华的设置。</p>
<h3 id="Python">Python<a class="header-anchor" href="#Python"></a></h3>
<p>说是 Python，其实大部分与 Python 无关。先列出来跟 Python 有关的配置吧。</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">g:python3_host_skip_check</span> = <span class="number">1</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:python3_host_prog</span>       = <span class="string">&#x27;/usr/local/bin/python3&#x27;</span></span><br></pre></td></tr></table></figure>
<p>咦好像就没了呢。不过接下来才是重头戏。一个完全不会 VimScript 的人千辛万苦写出的一个稀烂的 <code>RunProgram</code> 函数。作用是终端运行程序，支持 Python, JavaScript, AutoHotkey, batch 及 markdown 预览，其余情况打开内置终端。</p>
<p>现在让我解释我也解释不清了。尽量讲一点吧。</p>
<figure class="highlight vim"><figcaption><span>外部</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;F5&gt;</span> :<span class="keyword">call</span> RunProgram()<span class="symbol">&lt;CR&gt;</span></span><br><span class="line"><span class="keyword">inoremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;F5&gt;</span> <span class="symbol">&lt;C-r&gt;</span>=Execute(<span class="string">&#x27;call RunProgram()&#x27;</span>)<span class="symbol">&lt;Cr&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">autocmd</span> FileType <span class="keyword">python</span>,javascript <span class="keyword">nnoremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;leader&gt;</span>Q :<span class="keyword">call</span> CloseTerminal()<span class="symbol">&lt;CR&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:terminal_settings</span> = &#123;<span class="string">&#x27;vertical&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;term_cols&#x27;</span>: <span class="number">60</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">highlight</span> default link Terminal Normal</span><br></pre></td></tr></table></figure>
<p><kbd>F5</kbd> 执行。在文件类型为 Python 或 JavaScript 时按 <kbd>Space</kbd> + <kbd>Shift</kbd> + <kbd>Q</kbd> 关闭终端。</p>
<p>终端采用垂直分割，宽度为 60，</p>
<figure class="highlight vim"><figcaption><span>RunProgram</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function!</span> <span class="title">RunProgram</span><span class="params">()</span></span><br><span class="line">    <span class="keyword">if</span> &amp;<span class="keyword">filetype</span> == <span class="string">&#x27;&#x27;</span></span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    <span class="keyword">endif</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">silent</span> <span class="keyword">execute</span> <span class="string">&#x27;w&#x27;</span></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">l:filename</span> = <span class="built_in">expand</span>(<span class="string">&#x27;%&#x27;</span>)</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">l:opts</span>     = <span class="variable">g:terminal_settings</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> &amp;<span class="keyword">filetype</span> == <span class="string">&#x27;python&#x27;</span></span><br><span class="line">        <span class="keyword">let</span> <span class="variable">l:term_col</span> = OpenTerminal()</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">l:opts</span>.term_name = <span class="string">&#x27;python_terminal&#x27;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="variable">l:term_col</span></span><br><span class="line">            <span class="keyword">let</span> <span class="variable">l:opts</span>.term_cols = <span class="variable">l:term_col</span></span><br><span class="line">        <span class="keyword">endif</span></span><br><span class="line">        <span class="keyword">call</span> term_start(<span class="string">&#x27;python &quot;&#x27;</span> . <span class="variable">l:filename</span> . <span class="string">&#x27;&quot;&#x27;</span>, <span class="variable">l:opts</span>)</span><br><span class="line">    <span class="keyword">elseif</span> &amp;<span class="keyword">filetype</span> == <span class="string">&#x27;javascript&#x27;</span></span><br><span class="line">        <span class="keyword">let</span> <span class="variable">l:term_col</span> = OpenTerminal()</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">l:opts</span>.term_name = <span class="string">&#x27;javascript_terminal&#x27;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="variable">l:term_col</span></span><br><span class="line">            <span class="keyword">let</span> <span class="variable">l:opts</span>.term_cols = <span class="variable">l:term_col</span></span><br><span class="line">        <span class="keyword">endif</span></span><br><span class="line">        <span class="keyword">call</span> term_start(<span class="string">&#x27;node &quot;&#x27;</span>. <span class="variable">l:filename</span> . <span class="string">&#x27;&quot;&#x27;</span>, <span class="variable">l:opts</span>)</span><br><span class="line">    <span class="keyword">elseif</span> &amp;<span class="keyword">filetype</span> == <span class="string">&#x27;autohotkey&#x27;</span></span><br><span class="line">        <span class="keyword">let</span> <span class="variable">l:autohotkey_ux_path</span> = $ProgramFiles . <span class="string">&#x27;/AutoHotkey/UX/&#x27;</span></span><br><span class="line">        <span class="keyword">silent</span> <span class="keyword">execute</span> <span class="string">&#x27;!start &quot;&#x27;</span> . <span class="variable">l:autohotkey_ux_path</span> . <span class="string">&#x27;AutoHotkeyUX.exe&quot; &quot;&#x27;</span> . <span class="variable">l:autohotkey_ux_path</span> . <span class="string">&#x27;launcher.ahk&quot; /restart &quot;%:p&quot;&#x27;</span></span><br><span class="line">    <span class="keyword">elseif</span> &amp;<span class="keyword">filetype</span> == <span class="string">&#x27;markdown&#x27;</span></span><br><span class="line">        <span class="keyword">silent</span> <span class="keyword">execute</span> <span class="string">&#x27;CocCommand markdown-preview-enhanced.openPreview&#x27;</span></span><br><span class="line">    <span class="keyword">elseif</span> &amp;<span class="keyword">filetype</span> == <span class="string">&#x27;dosbatch&#x27;</span></span><br><span class="line">        <span class="keyword">silent</span> !%</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">let</span> <span class="variable">l:term_col</span> = OpenTerminal()</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">l:opts</span>.term_name = <span class="string">&#x27;Terminal&#x27;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="variable">l:term_col</span></span><br><span class="line">            <span class="keyword">let</span> <span class="variable">l:opts</span>.term_cols = <span class="variable">l:term_col</span></span><br><span class="line">        <span class="keyword">endif</span></span><br><span class="line">        <span class="keyword">call</span> term_start(<span class="string">&#x27;cmd&#x27;</span>, <span class="variable">l:opts</span>)</span><br><span class="line">    <span class="keyword">endif</span></span><br><span class="line"><span class="keyword">endfunction</span></span><br></pre></td></tr></table></figure>
<p>分文件类型对应执行。Python 和 JavaScript 类似。AutoHotkey 及 markdown 预览都需另行配置。batch 最简单。</p>
<figure class="highlight vim"><figcaption><span>Terminal</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function!</span> <span class="title">OpenTerminal</span><span class="params">()</span></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">l:windowsWithTerminal</span> = <span class="built_in">filter</span>(<span class="built_in">range</span>(<span class="number">1</span>, <span class="built_in">winnr</span>(<span class="string">&#x27;$&#x27;</span>)), <span class="string">&#x27;getwinvar(v:val, &quot;&amp;buftype&quot;) ==# &quot;terminal&quot; || term_getstatus(winbufnr(v:val))&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> !empty(<span class="variable">l:windowsWithTerminal</span>)</span><br><span class="line">        <span class="keyword">silent</span> <span class="keyword">execute</span> <span class="variable">l:windowsWithTerminal</span>[<span class="number">0</span>] . <span class="string">&#x27;wincmd w&#x27;</span></span><br><span class="line">        <span class="keyword">let</span> <span class="variable">l:current_col</span> = <span class="built_in">winwidth</span>(<span class="variable">l:windowsWithTerminal</span>[<span class="number">0</span>])</span><br><span class="line">        <span class="keyword">call</span> CloseTerminal()</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">l:current_col</span></span><br><span class="line">    <span class="keyword">endif</span></span><br><span class="line"><span class="keyword">endfunction</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function!</span> <span class="title">CloseTerminal</span><span class="params">()</span></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">l:winnumber</span> = <span class="built_in">winnr</span>()</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">getwinvar</span>(<span class="variable">l:winnumber</span>, <span class="string">&quot;&amp;buftype&quot;</span>) ==# <span class="string">&quot;terminal&quot;</span> || term_getstatus(<span class="built_in">winbufnr</span>(<span class="variable">l:winnumber</span>))</span><br><span class="line">        <span class="keyword">silent</span> <span class="keyword">execute</span> <span class="built_in">winbufnr</span>(<span class="variable">l:winnumber</span>) . <span class="string">&#x27;bw!&#x27;</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">silent</span> <span class="keyword">execute</span> <span class="string">&#x27;q!&#x27;</span></span><br><span class="line">    <span class="keyword">endif</span></span><br><span class="line"><span class="keyword">endfunction</span></span><br></pre></td></tr></table></figure>
<p>这个我现在自己也搞不懂啥意思了。反正呢，看名字就是一开一关。<code>OpenTerminal</code> 函数会关闭已有的终端，即保证始终只有一个终端在运行。</p>
<h3 id="lightline">lightline<a class="header-anchor" href="#lightline"></a></h3>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">g:lightline</span> = &#123;</span><br><span class="line">\ <span class="string">&#x27;colorscheme&#x27;</span>: <span class="string">&#x27;gruvbox&#x27;</span>,</span><br><span class="line">\ <span class="string">&#x27;active&#x27;</span>: &#123;</span><br><span class="line">\   <span class="string">&#x27;left&#x27;</span>: [ [ <span class="string">&#x27;mode&#x27;</span>, <span class="string">&#x27;paste&#x27;</span> ],</span><br><span class="line">\             [ <span class="string">&#x27;gitbranch&#x27;</span>, <span class="string">&#x27;readonly&#x27;</span>, <span class="string">&#x27;filename&#x27;</span> ] ],</span><br><span class="line">\   <span class="string">&#x27;right&#x27;</span>: [ [ <span class="string">&#x27;lineinfo&#x27;</span> ],</span><br><span class="line">\              [ <span class="string">&#x27;linter_checking&#x27;</span>, <span class="string">&#x27;linter_errors&#x27;</span>, <span class="string">&#x27;linter_warnings&#x27;</span>, <span class="string">&#x27;linter_infos&#x27;</span>, <span class="string">&#x27;linter_ok&#x27;</span> ],</span><br><span class="line">\              [ <span class="string">&#x27;fileformat&#x27;</span>, <span class="string">&#x27;fileencoding&#x27;</span>, <span class="string">&#x27;filetype&#x27;</span>] ]</span><br><span class="line">\ &#125;,</span><br><span class="line">\ <span class="string">&#x27;tabline&#x27;</span>: &#123;</span><br><span class="line">\   <span class="string">&#x27;left&#x27;</span>  : [ [<span class="string">&#x27;buffers&#x27;</span>] ],</span><br><span class="line">\   <span class="string">&#x27;right&#x27;</span> : [ [<span class="string">&#x27;close&#x27;</span>] ]</span><br><span class="line">\ &#125;,</span><br><span class="line">\ <span class="string">&#x27;component_expand&#x27;</span>: &#123;</span><br><span class="line">\   <span class="string">&#x27;buffers&#x27;</span>         : <span class="string">&#x27;lightline#bufferline#buffers&#x27;</span>,</span><br><span class="line">\   <span class="string">&#x27;linter_checking&#x27;</span> : <span class="string">&#x27;lightline#ale#checking&#x27;</span>,</span><br><span class="line">\   <span class="string">&#x27;linter_infos&#x27;</span>    : <span class="string">&#x27;lightline#ale#infos&#x27;</span>,</span><br><span class="line">\   <span class="string">&#x27;linter_warnings&#x27;</span> : <span class="string">&#x27;lightline#ale#warnings&#x27;</span>,</span><br><span class="line">\   <span class="string">&#x27;linter_errors&#x27;</span>   : <span class="string">&#x27;lightline#ale#errors&#x27;</span>,</span><br><span class="line">\   <span class="string">&#x27;linter_ok&#x27;</span>       : <span class="string">&#x27;lightline#ale#ok&#x27;</span>,</span><br><span class="line">\ &#125;,</span><br><span class="line">\ <span class="string">&#x27;component_type&#x27;</span>: &#123;</span><br><span class="line">\   <span class="string">&#x27;buffers&#x27;</span>         : <span class="string">&#x27;tabsel&#x27;</span>,</span><br><span class="line">\   <span class="string">&#x27;linter_warnings&#x27;</span> : <span class="string">&#x27;warning&#x27;</span>,</span><br><span class="line">\   <span class="string">&#x27;linter_errors&#x27;</span>   : <span class="string">&#x27;error&#x27;</span>,</span><br><span class="line">\   <span class="string">&#x27;linter_ok&#x27;</span>       : <span class="string">&#x27;ale&#x27;</span>,</span><br><span class="line">\ &#125;,</span><br><span class="line">\ <span class="string">&#x27;component_function&#x27;</span>: &#123;</span><br><span class="line">\   <span class="string">&#x27;gitbranch&#x27;</span> : <span class="string">&#x27;LightLineGitBranch&#x27;</span>,</span><br><span class="line">\   <span class="string">&#x27;lineinfo&#x27;</span>  : <span class="string">&#x27;LightLineLineInfo&#x27;</span>,</span><br><span class="line">\ &#125;,</span><br><span class="line">\ <span class="string">&#x27;separator&#x27;</span>: &#123; <span class="string">&#x27;left&#x27;</span>: <span class="string">&quot;\ue0b0&quot;</span>, <span class="string">&#x27;right&#x27;</span>: <span class="string">&quot;\ue0b2&quot;</span> &#125;,</span><br><span class="line">\ <span class="string">&#x27;subseparator&#x27;</span>: &#123; <span class="string">&#x27;left&#x27;</span>: <span class="string">&quot;\ue0b1&quot;</span>, <span class="string">&#x27;right&#x27;</span>: <span class="string">&quot;\ue0b3&quot;</span> &#125;</span><br><span class="line">\&#125;</span><br></pre></td></tr></table></figure>
<p>好累啊，感觉这个也没啥好讲的。本来也是在示例配置下，东拼西凑的。</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function!</span> <span class="title">LightLineGitBranch</span><span class="params">()</span> </span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;\uE0A0&quot;</span> . (<span class="built_in">exists</span>(<span class="string">&#x27;*FugitiveHead&#x27;</span>) ? <span class="string">&quot; &quot;</span> . FugitiveHead() : <span class="string">&quot;&quot;</span>)</span><br><span class="line"><span class="keyword">endfunction</span></span><br></pre></td></tr></table></figure>
<p>嗯这个应该是提供 Git 信息的，出处不详。</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">g:viewplugins</span> = <span class="string">&#x27;NERD_tree\|\[Plugins\]\|\[coc-explorer\]&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function!</span> <span class="title">LightLineLineInfo</span><span class="params">()</span></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">expand</span>(<span class="string">&#x27;%:t&#x27;</span>) =~# <span class="variable">g:viewplugins</span> ? <span class="string">&#x27;&#x27;</span> : <span class="built_in">printf</span>(<span class="string">&#x27; %d/%d | %d/%d&#x27;</span>, <span class="built_in">line</span>(<span class="string">&#x27;.&#x27;</span>), <span class="built_in">line</span>(<span class="string">&#x27;$&#x27;</span>), <span class="keyword">col</span>(<span class="string">&#x27;.&#x27;</span>), <span class="keyword">col</span>(<span class="string">&#x27;$&#x27;</span>))</span><br><span class="line"><span class="keyword">endfunction</span></span><br></pre></td></tr></table></figure>
<p>在特定场合（NerdTree，插件更新及 coc-explorer）下不显示特定信息。</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">s:palette</span> = <span class="variable">g:lightline</span>#colorscheme#gruvbox#palette</span><br><span class="line"><span class="keyword">let</span> <span class="variable">s:palette</span>.tabline.ale = [[<span class="string">&#x27;#282C34&#x27;</span>, <span class="string">&#x27;#92A4A4&#x27;</span>, <span class="number">0</span>, <span class="number">21</span>]]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:lightline</span>#ale#indicator_checking     = <span class="string">&#x27;⏳&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:lightline</span>#ale#indicator_infos        = <span class="string">&#x27;📜&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:lightline</span>#ale#indicator_errors       = <span class="string">&#x27;💥&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:lightline</span>#ale#indicator_warnings     = <span class="string">&#x27;⚡&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:lightline</span>#ale#indicator_ok           = <span class="string">&#x27;✨&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:lightline</span>#bufferline#show_number     = <span class="number">2</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:lightline</span>#bufferline#unicode_symbols = <span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>ale 的配置。颜色不太满意。</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;Leader&gt;</span><span class="number">1</span>  <span class="symbol">&lt;Plug&gt;</span>lightline#bufferline#go(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;Leader&gt;</span><span class="number">2</span>  <span class="symbol">&lt;Plug&gt;</span>lightline#bufferline#go(<span class="number">2</span>)</span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;Leader&gt;</span><span class="number">3</span>  <span class="symbol">&lt;Plug&gt;</span>lightline#bufferline#go(<span class="number">3</span>)</span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;Leader&gt;</span><span class="number">4</span>  <span class="symbol">&lt;Plug&gt;</span>lightline#bufferline#go(<span class="number">4</span>)</span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;Leader&gt;</span><span class="number">5</span>  <span class="symbol">&lt;Plug&gt;</span>lightline#bufferline#go(<span class="number">5</span>)</span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;Leader&gt;</span><span class="number">6</span>  <span class="symbol">&lt;Plug&gt;</span>lightline#bufferline#go(<span class="number">6</span>)</span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;Leader&gt;</span><span class="number">7</span>  <span class="symbol">&lt;Plug&gt;</span>lightline#bufferline#go(<span class="number">7</span>)</span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;Leader&gt;</span><span class="number">8</span>  <span class="symbol">&lt;Plug&gt;</span>lightline#bufferline#go(<span class="number">8</span>)</span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;Leader&gt;</span><span class="number">9</span>  <span class="symbol">&lt;Plug&gt;</span>lightline#bufferline#go(<span class="number">9</span>)</span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;Leader&gt;</span><span class="number">0</span>  <span class="symbol">&lt;Plug&gt;</span>lightline#bufferline#go(<span class="number">10</span>)</span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;Leader&gt;</span>d1 <span class="symbol">&lt;Plug&gt;</span>lightline#bufferline#delete(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;Leader&gt;</span>d2 <span class="symbol">&lt;Plug&gt;</span>lightline#bufferline#delete(<span class="number">2</span>)</span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;Leader&gt;</span>d3 <span class="symbol">&lt;Plug&gt;</span>lightline#bufferline#delete(<span class="number">3</span>)</span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;Leader&gt;</span>d4 <span class="symbol">&lt;Plug&gt;</span>lightline#bufferline#delete(<span class="number">4</span>)</span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;Leader&gt;</span>d5 <span class="symbol">&lt;Plug&gt;</span>lightline#bufferline#delete(<span class="number">5</span>)</span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;Leader&gt;</span>d6 <span class="symbol">&lt;Plug&gt;</span>lightline#bufferline#delete(<span class="number">6</span>)</span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;Leader&gt;</span>d7 <span class="symbol">&lt;Plug&gt;</span>lightline#bufferline#delete(<span class="number">7</span>)</span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;Leader&gt;</span>d8 <span class="symbol">&lt;Plug&gt;</span>lightline#bufferline#delete(<span class="number">8</span>)</span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;Leader&gt;</span>d9 <span class="symbol">&lt;Plug&gt;</span>lightline#bufferline#delete(<span class="number">9</span>)</span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;Leader&gt;</span>d0 <span class="symbol">&lt;Plug&gt;</span>lightline#bufferline#delete(<span class="number">10</span>)</span><br></pre></td></tr></table></figure>
<p>一些 buffer 的操作。</p>
<h3 id="Rainbow">Rainbow<a class="header-anchor" href="#Rainbow"></a></h3>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">g:rainbow_active</span> = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:rainbow_conf</span> = &#123;</span><br><span class="line">\    <span class="string">&#x27;guifgs&#x27;</span>: [<span class="string">&#x27;#858580&#x27;</span>, <span class="string">&#x27;#8FBCBB&#x27;</span>, <span class="string">&#x27;#D08770&#x27;</span>, <span class="string">&#x27;#A3BE8C&#x27;</span>, <span class="string">&#x27;#EBCB8B&#x27;</span>, <span class="string">&#x27;#B48EAD&#x27;</span>, <span class="string">&#x27;#80a880&#x27;</span>, <span class="string">&#x27;#887070&#x27;</span>],</span><br><span class="line">\    <span class="string">&#x27;ctermfgs&#x27;</span>: [<span class="string">&#x27;lightblue&#x27;</span>, <span class="string">&#x27;lightyellow&#x27;</span>, <span class="string">&#x27;lightcyan&#x27;</span>, <span class="string">&#x27;lightmagenta&#x27;</span>],</span><br><span class="line">\    <span class="string">&#x27;operators&#x27;</span>: <span class="string">&#x27;_,_&#x27;</span>,</span><br><span class="line">\    <span class="string">&#x27;parentheses&#x27;</span>: [<span class="string">&#x27;start=/(/ end=/)/ fold&#x27;</span>, <span class="string">&#x27;start=/\[/ end=/\]/ fold&#x27;</span>, <span class="string">&#x27;start=/&#123;/ end=/&#125;/ fold&#x27;</span>],</span><br><span class="line">\    <span class="string">&#x27;separately&#x27;</span>: &#123;</span><br><span class="line">\        <span class="string">&#x27;*&#x27;</span>: &#123;&#125;,</span><br><span class="line">\        <span class="string">&#x27;markdown&#x27;</span>: &#123;</span><br><span class="line">\              <span class="string">&#x27;parentheses_options&#x27;</span>: <span class="string">&#x27;containedin=markdownCode contained&#x27;</span>,</span><br><span class="line">\        &#125;,</span><br><span class="line">\        <span class="string">&#x27;tex&#x27;</span>: &#123;</span><br><span class="line">\            <span class="string">&#x27;parentheses&#x27;</span>: [<span class="string">&#x27;start=/(/ end=/)/&#x27;</span>, <span class="string">&#x27;start=/\[/ end=/\]/&#x27;</span>],</span><br><span class="line">\        &#125;,</span><br><span class="line">\        <span class="string">&#x27;lisp&#x27;</span>: &#123;</span><br><span class="line">\            <span class="string">&#x27;guifgs&#x27;</span>: [<span class="string">&#x27;royalblue3&#x27;</span>, <span class="string">&#x27;darkorange3&#x27;</span>, <span class="string">&#x27;seagreen3&#x27;</span>, <span class="string">&#x27;firebrick&#x27;</span>, <span class="string">&#x27;darkorchid3&#x27;</span>],</span><br><span class="line">\        &#125;,</span><br><span class="line">\        <span class="string">&#x27;vim&#x27;</span>: &#123;</span><br><span class="line">\            <span class="string">&#x27;parentheses&#x27;</span>: [<span class="string">&#x27;start=/(/ end=/)/&#x27;</span>, <span class="string">&#x27;start=/\[/ end=/\]/&#x27;</span>, <span class="string">&#x27;start=/&#123;/ end=/&#125;/ fold&#x27;</span>, <span class="string">&#x27;start=/(/ end=/)/ containedin=vimFuncBody&#x27;</span>, <span class="string">&#x27;start=/\[/ end=/\]/ containedin=vimFuncBody&#x27;</span>, <span class="string">&#x27;start=/&#123;/ end=/&#125;/ fold containedin=vimFuncBody&#x27;</span>],</span><br><span class="line">\        &#125;,</span><br><span class="line">\        <span class="string">&#x27;html&#x27;</span>: &#123;</span><br><span class="line">\            <span class="string">&#x27;parentheses&#x27;</span>: [<span class="string">&#x27;start=/\v\&lt;((area|base|br|col|embed|hr|img|input|keygen|link|menuitem|meta|param|source|track|wbr)[ &gt;])@!\z([-_:a-zA-Z0-9]+)(\s+[-_:a-zA-Z0-9]+(\=(&quot;[^&quot;]*&quot;|&#x27;</span>.<span class="string">&quot;&#x27;&quot;</span>.<span class="string">&#x27;[^&#x27;</span>.<span class="string">&quot;&#x27;&quot;</span>.<span class="string">&#x27;]*&#x27;</span>.<span class="string">&quot;&#x27;&quot;</span>.<span class="string">&#x27;|[^ &#x27;</span>.<span class="string">&quot;&#x27;&quot;</span>.<span class="string">&#x27;&quot;&gt;&lt;=`]*))?)*\&gt;/ end=#&lt;/\z1&gt;# fold&#x27;</span>],</span><br><span class="line">\        &#125;,</span><br><span class="line">\        <span class="string">&#x27;css&#x27;</span>: <span class="number">0</span>,</span><br><span class="line">\    &#125;</span><br><span class="line">\&#125;</span><br></pre></td></tr></table></figure>
<p>照抄的。</p>
<h3 id="indentLine">indentLine<a class="header-anchor" href="#indentLine"></a></h3>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">g:indentLine_fileTypeExclude</span> = [<span class="string">&#x27;json&#x27;</span>, <span class="string">&#x27;markdown&#x27;</span>]</span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:indentLine_conceallevel</span>    = <span class="number">2</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:indentLine_concealcursor</span>   = <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:indentLine_setConceal</span>      = <span class="number">0</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:indentLine_enabled</span>         = <span class="number">1</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:indent_guides_guide_size</span>   = <span class="number">1</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:indent_guides_start_level</span>  = <span class="number">1</span></span><br></pre></td></tr></table></figure>
<h3 id="Fugitive">Fugitive<a class="header-anchor" href="#Fugitive"></a></h3>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;silent&gt;</span>mm :G<span class="symbol">&lt;Cr&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">autocmd</span> FileType fugitive <span class="keyword">nnoremap</span> <span class="symbol">&lt;silent&gt;</span>mp  :G push<span class="symbol">&lt;Cr&gt;</span></span><br><span class="line"><span class="keyword">autocmd</span> FileType fugitive <span class="keyword">nnoremap</span> <span class="symbol">&lt;silent&gt;</span>mq  :G pull<span class="symbol">&lt;Cr&gt;</span></span><br><span class="line"><span class="keyword">autocmd</span> FileType fugitive <span class="keyword">nnoremap</span> <span class="symbol">&lt;silent&gt;</span>mus :G submodule <span class="keyword">update</span> --remote<span class="symbol">&lt;Cr&gt;</span></span><br></pre></td></tr></table></figure>
<p><kbd>mm</kbd> 打开 Fugitive；在 Fugitive 下 <kbd>mp</kbd> push，<kbd>mq</kbd> pull，<kbd>mus</kbd> 更新 submodules</p>
<h3 id="autoformat">autoformat<a class="header-anchor" href="#autoformat"></a></h3>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line"><span class="keyword">noremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;F3&gt;</span> :Autoformat<span class="symbol">&lt;Cr&gt;</span></span><br></pre></td></tr></table></figure>
<p><kbd>F3</kbd> 自动格式化。但我没咋用过，格式都是手动保持的。</p>
<p>除此以外写了一行注释，似乎要安装依赖。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install -g js-beautify</span><br></pre></td></tr></table></figure>
<h3 id="Tabout">Tabout<a class="header-anchor" href="#Tabout"></a></h3>
<p>这个也不是插件。终于有出处了。</p>
<p>除了上面加的 UltiSnips 拓展键，为了即使在能跳转 tabstops 时也能完成 Tabout，还加了两个映射。（虽然叫 Tabout，但其实是 Endout）</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&quot; https://stackoverflow.com/questions/20038550/step-over-bracket-parenthesis-etc-with-tab-in-vim</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; Tabout &#123;&#123;&#123;1</span></span><br><span class="line"><span class="keyword">inoremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;End&gt;</span>   <span class="symbol">&lt;C-r&gt;</span>=IncreaseColNumber()<span class="symbol">&lt;CR&gt;</span></span><br><span class="line"><span class="keyword">inoremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;S-End&gt;</span> <span class="symbol">&lt;C-r&gt;</span>=DecreaseColNumber()<span class="symbol">&lt;CR&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="variable">s:delimiters_exp</span> = <span class="string">&#x27;[\[\]&#123;&#125;()$&amp;&quot;&#x27;</span> . <span class="string">&quot;&#x27;&quot;</span> . <span class="string">&#x27;&lt;&gt;]&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function!</span> <span class="title">IncreaseColNumber</span><span class="params">()</span></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">l:line</span> = <span class="built_in">getline</span>(<span class="string">&#x27;.&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="variable">l:line</span>[<span class="keyword">col</span>(<span class="string">&#x27;.&#x27;</span>) - <span class="number">1</span>] =~# <span class="variable">s:delimiters_exp</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;\&lt;Right&gt;&quot;</span></span><br><span class="line">    <span class="keyword">endif</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="keyword">endfunction</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function!</span> <span class="title">DecreaseColNumber</span><span class="params">()</span></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">l:line</span> = <span class="built_in">getline</span>(<span class="string">&#x27;.&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="variable">l:line</span>[<span class="keyword">col</span>(<span class="string">&#x27;.&#x27;</span>) - <span class="number">2</span>] =~# <span class="variable">s:delimiters_exp</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;\&lt;Left&gt;&quot;</span></span><br><span class="line">    <span class="keyword">endif</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="keyword">endfunction</span></span><br><span class="line"><span class="comment">&quot; &#125;&#125;&#125;1</span></span><br></pre></td></tr></table></figure>
<p>使用 <kbd>End</kbd> 及 <kbd>Shift</kbd> + <kbd>End</kbd> 在括号等反复横跳。</p>
<h2 id="额外">额外<a class="header-anchor" href="#额外"></a></h2>
<p>已经够长了。本篇就不讲额外内容了。</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Vim/" rel="tag"><i class="fa fa-tag"></i> Vim</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2023/08/my-windows-softwares/" rel="prev" title="使用 Windows 软件集合">
                  <i class="fa fa-angle-left"></i> 使用 Windows 软件集合
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2023/08/nju-email/" rel="next" title="2023-08-26 杂记 & 南京大学邮箱设置">
                  2023-08-26 杂记 & 南京大学邮箱设置 <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments" id="waline"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 2023 – 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Lyieu</span>
  </div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.28/fancybox/fancybox.umd.js" integrity="sha256-ytMJGN3toR+a84u7g7NuHm91VIR06Q41kMWDr2pq7Zo=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>




  <script src="/js/third-party/fancybox.js"></script>



  




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css" integrity="sha256-UF1fgpAiu3tPJN/uCqEUHNe7pnr+QR0SQDNfgglgtcM=" crossorigin="anonymous">
  <script class="next-config" data-name="katex" type="application/json">{"copy_tex_js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/contrib/copy-tex.min.js","integrity":"sha256-Us54+rSGDSTvIhKKUs4kygE2ipA0RXpWWh0/zLqw3bs="}}</script>
  <script src="/js/third-party/math/katex.js"></script>
<script src="/js/third-party/math/mhchem.min.js"></script>
<script src="/js/third-party/math/copy-tex.min.js"></script>


<script class="next-config" data-name="waline" type="application/json">{"lang":"zh-CN","enable":true,"serverURL":"https://blog-comments-virid.vercel.app/","cssUrl":"https://unpkg.com/@waline/client@v2/dist/waline.css","commentCount":true,"pageview":false,"libUrl":"https://unpkg.com/@waline/client@v2/dist/waline.js","dark":"auto","locale":{"placeholder":"欢迎评论~","level0":"问","level1":"哭","level2":"埋","level3":"挖","level4":"抬","level5":"死","level6":"熬","level7":"买","level8":"瞧","level9":"病","reactionTitle":"反应"},"reaction":["https://unpkg.com/@waline/emojis@1.2.0/tw-emoji/1f970.png","https://unpkg.com/@waline/emojis@1.2.0/tw-emoji/1f973.png","https://unpkg.com/@waline/emojis@1.2.0/tw-emoji/1f9d0.png","https://unpkg.com/@waline/emojis@1.2.0/tw-emoji/1f632.png","https://unpkg.com/@waline/emojis@1.2.0/tw-emoji/1f610.png","https://unpkg.com/@waline/emojis@1.2.0/tw-emoji/1f641.png","https://unpkg.com/@waline/emojis@1.2.0/tw-emoji/1f62d.png"],"emoji":["https://unpkg.com/@waline/emojis@1.2.0/qq","https://unpkg.com/@waline/emojis@1.2.0/tw-emoji","https://unpkg.com/@waline/emojis@1.2.0/tw-object","https://unpkg.com/@waline/emojis@1.2.0/tw-travel","https://unpkg.com/@waline/emojis@1.2.0/tw-weather"],"search":false,"meta":["nick","mail","link"],"requiredMeta":["nick","mail"],"wordLimit":0,"login":"enable","pageSize":15,"texRenderer":"KaTeX","el":"#waline","comment":true,"path":"/2023/08/vimrc/"}</script>
<link rel="stylesheet" href="https://unpkg.com/@waline/client@v2/dist/waline.css">
<script>
document.addEventListener('page:loaded', () => {
  NexT.utils.loadComments(CONFIG.waline.el).then(() =>
    NexT.utils.getScript(CONFIG.waline.libUrl, { condition: window.Waline })
  ).then(() => 
    Waline.init(Object.assign({}, CONFIG.waline,{ el: document.querySelector(CONFIG.waline.el) }))
  );
});
</script>

</body>
</html>
